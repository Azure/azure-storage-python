<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Upgrade Guide &#8212; Azure Storage SDK for Python 0.34.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.34.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="azure package" href="ref/azure.html" />
    <link rel="prev" title="Azure Storage SDK for Python." href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="upgrade-guide">
<h1>Upgrade Guide<a class="headerlink" href="#upgrade-guide" title="Permalink to this headline">¶</a></h1>
<p>This guide is intended to help upgrade code written for the Azure Storage Python
library before version 0.30.0.</p>
<p>The best way to see how to upgrade a specific API is to take a look at the usage
samples in the <a class="reference external" href="https://github.com/Azure/azure-storage-python/tree/master/samples">Samples</a>
directory on GitHub. A very specific set of changes as well as additions can be
found in the ChangeLog and BreakingChanges documents. The below is a summary of
those documents containing the most relevant pieces for the upgrade scenario.</p>
</div>
<div class="section" id="general-changes">
<h1>General Changes<a class="headerlink" href="#general-changes" title="Permalink to this headline">¶</a></h1>
<p>In general, we attempted to use more appropriate Python types for parameter and
return values rather than always taking and receiving strings. Parameter and return
values previously prefixed with x_ms were simplified by removing this prefix, and
parameter values are divided by &#8216;_&#8217; between words as is idiomatic.</p>
<p>Listing returns a generator rather than a result segment. This generator automatically
follows continuation tokens as more results are requested.</p>
<p>SAS methods take several individual parameters rather than a single paramter
object. Similarly, ACL getters and setters take dictionaries mapping id to
AccessPolicy rather than a list of SignedIdentifiers each holding an id and an
AccessPolicy.</p>
</div>
<div class="section" id="blob">
<h1>Blob<a class="headerlink" href="#blob" title="Permalink to this headline">¶</a></h1>
<p>The single BlobService object was divided into three subservices for the different
blob types (BlockBlobService, PageBlobService, AppendBlobService) with common
methods in the abstract BaseBlobService these inherit from. This was done for two
reasons. First, to reduce confusion when blob-type specific methods were used on
the incorrect blob type. Second, to simplify the BlobService object which had grown
to be quite extensive when append blob was added.</p>
<p>ContentSettings objects have replaced all content_* and cache_control parameters
and return values for applicable APIs. This is intended to highlight that the
semantics of setting content properties is replace rather than merge, meaning that
setting any one property will cause any unspecified properties to be cleared on
the blob.</p>
<p>On the performance side, single-threaded blob download APIs will now download
the blob without chunking to improve perf and not do an initial get to find the
size of the blob. However, as a result the progress_callback may receive None
for its total parameter when parallelism is off to allow for this optimization.</p>
</div>
<div class="section" id="queue">
<h1>Queue<a class="headerlink" href="#queue" title="Permalink to this headline">¶</a></h1>
<p>The largest change to the QueueService class is that queue messages are both XML
encoded and decoded by default. In past versions, either messages were not encoded
or decoded by default, or only encoded. Encoding and decoding methods can be
modified using the QueueService encode_function and decode_function instance variables.</p>
<p>Methods operating on queue messages and which have return values will return
QueueMessage objects. QueueMessages objects contain essentially the same fields
as previously, but the times are returned as dates rather than strings and the
dequeue count is returned as an int.</p>
</div>
<div class="section" id="table">
<h1>Table<a class="headerlink" href="#table" title="Permalink to this headline">¶</a></h1>
<p>Rather than having a boolean switch for turning batching on and off, batches are
an object which can be populated and then committed. Entities can be sent as dictionaries
or as Entity objects, and returned entities are accessible as either objects or
dictionaries. Methods which access and modify entites have been simplified so that
if they take an entity object they extract the partition key and row key from that
object rather than requiring these be sent separately.</p>
<p>All table entity integer values are stored on the service with type Edm.Int64
unless the type is explicitly overridden as Edm.Int32. Formerly, the type was
decided based on the size of the number, but this resulted in hard to predict
types on the service. So, the more consistent option was chosen.</p>
<p>Operations no longer echo content from the service and JSON is used instead of
AtomPub, improving performance.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Upgrade Guide</a></li>
<li><a class="reference internal" href="#general-changes">General Changes</a></li>
<li><a class="reference internal" href="#blob">Blob</a></li>
<li><a class="reference internal" href="#queue">Queue</a></li>
<li><a class="reference internal" href="#table">Table</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Azure Storage SDK for Python.</a></li>
      <li>Next: <a href="ref/azure.html" title="next chapter">azure package</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/upgrade.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Microsoft.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/upgrade.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>