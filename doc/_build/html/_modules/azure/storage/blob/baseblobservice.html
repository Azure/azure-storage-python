<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>azure.storage.blob.baseblobservice &#8212; Azure Storage SDK for Python 0.34.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '0.34.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for azure.storage.blob.baseblobservice</h1><div class="highlight"><pre>
<span></span><span class="c1">#-------------------------------------------------------------------------</span>
<span class="c1"># Copyright (c) Microsoft.  All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#   http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="c1">#--------------------------------------------------------------------------</span>
<span class="kn">from</span> <span class="nn">azure.common</span> <span class="k">import</span> <span class="n">AzureHttpError</span>
<span class="kn">from</span> <span class="nn">azure.storage._error</span> <span class="k">import</span> <span class="n">AzureException</span>
<span class="kn">from</span> <span class="nn">.._error</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_dont_fail_not_exist</span><span class="p">,</span>
    <span class="n">_dont_fail_on_exist</span><span class="p">,</span>
    <span class="n">_validate_not_none</span><span class="p">,</span>
    <span class="n">_validate_decryption_required</span><span class="p">,</span>
    <span class="n">_validate_access_policies</span><span class="p">,</span>
    <span class="n">_validate_content_match</span><span class="p">,</span>
    <span class="n">_ERROR_PARALLEL_NOT_SEEKABLE</span><span class="p">,</span>
    <span class="n">_ERROR_DECRYPTION_FAILURE</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">._error</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_ERROR_INVALID_LEASE_DURATION</span><span class="p">,</span>
    <span class="n">_ERROR_INVALID_LEASE_BREAK_PERIOD</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._common_conversion</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_int_to_str</span><span class="p">,</span>
    <span class="n">_to_str</span><span class="p">,</span>
    <span class="n">_datetime_to_utc_string</span><span class="p">,</span>
    <span class="n">_get_content_md5</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="k">import</span> <span class="n">ABCMeta</span>
<span class="kn">from</span> <span class="nn">.._serialization</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_get_request_body</span><span class="p">,</span>
    <span class="n">_convert_signed_identifiers_to_xml</span><span class="p">,</span>
    <span class="n">_convert_service_properties_to_xml</span><span class="p">,</span>
    <span class="n">_add_metadata_headers</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._http</span> <span class="k">import</span> <span class="n">HTTPRequest</span>
<span class="kn">from</span> <span class="nn">._download_chunking</span> <span class="k">import</span> <span class="n">_download_blob_chunks</span>
<span class="kn">from</span> <span class="nn">..models</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">Services</span><span class="p">,</span>
    <span class="n">ListGenerator</span><span class="p">,</span>
    <span class="n">_OperationContext</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">Blob</span><span class="p">,</span>
    <span class="n">BlobProperties</span><span class="p">,</span>
    <span class="n">_LeaseActions</span><span class="p">,</span>
    <span class="n">ContainerPermissions</span><span class="p">,</span>
    <span class="n">BlobPermissions</span><span class="p">,</span>
    <span class="n">Container</span><span class="p">,</span>
    <span class="n">ContainerProperties</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._auth</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_StorageSASAuthentication</span><span class="p">,</span>
    <span class="n">_StorageSharedKeyAuthentication</span><span class="p">,</span>
    <span class="n">_StorageNoAuthentication</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._connection</span> <span class="k">import</span> <span class="n">_ServiceParameters</span>
<span class="kn">from</span> <span class="nn">.._constants</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">SERVICE_HOST_BASE</span><span class="p">,</span>
    <span class="n">DEFAULT_PROTOCOL</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._deserialization</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_convert_xml_to_service_properties</span><span class="p">,</span>
    <span class="n">_get_download_size</span><span class="p">,</span>
    <span class="n">_parse_metadata</span><span class="p">,</span>
    <span class="n">_parse_properties</span><span class="p">,</span>
    <span class="n">_convert_xml_to_service_stats</span><span class="p">,</span>
    <span class="n">_parse_length_from_content_range</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">._serialization</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_get_path</span><span class="p">,</span>
    <span class="n">_validate_and_format_range_headers</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">._deserialization</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_convert_xml_to_containers</span><span class="p">,</span>
    <span class="n">_parse_blob</span><span class="p">,</span>
    <span class="n">_convert_xml_to_blob_list</span><span class="p">,</span>
    <span class="n">_parse_container</span><span class="p">,</span>
    <span class="n">_parse_snapshot_blob</span><span class="p">,</span>
    <span class="n">_parse_lease</span><span class="p">,</span>
    <span class="n">_convert_xml_to_signed_identifiers_and_access</span><span class="p">,</span>
    <span class="n">_parse_base_properties</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">..sharedaccesssignature</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">SharedAccessSignature</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">..storageclient</span> <span class="k">import</span> <span class="n">StorageClient</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,):</span>
    <span class="kn">from</span> <span class="nn">io</span> <span class="k">import</span> <span class="n">BytesIO</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">cStringIO</span> <span class="k">import</span> <span class="n">StringIO</span> <span class="k">as</span> <span class="n">BytesIO</span>

<div class="viewcode-block" id="BaseBlobService"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService">[docs]</a><span class="k">class</span> <span class="nc">BaseBlobService</span><span class="p">(</span><span class="n">StorageClient</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This is the main class managing Blob resources.</span>

<span class="sd">    The Blob service stores text and binary data as blobs in the cloud.</span>
<span class="sd">    The Blob service offers the following three resources: the storage account,</span>
<span class="sd">    containers, and blobs. Within your storage account, containers provide a</span>
<span class="sd">    way to organize sets of blobs. For more information please see:</span>
<span class="sd">    https://msdn.microsoft.com/en-us/library/azure/ee691964.aspx</span>

<span class="sd">    :ivar int MAX_SINGLE_GET_SIZE: </span>
<span class="sd">        The size of the first range get performed by get_blob_to_* methods if </span>
<span class="sd">        max_connections is greater than 1. Less data will be returned if the </span>
<span class="sd">        blob is smaller than this.</span>
<span class="sd">    :ivar int MAX_CHUNK_GET_SIZE: </span>
<span class="sd">        The size of subsequent range gets performed by get_blob_to_* methods if </span>
<span class="sd">        max_connections is greater than 1 and the blob is larger than MAX_SINGLE_GET_SIZE. </span>
<span class="sd">        Less data will be returned if the remainder of the blob is smaller than </span>
<span class="sd">        this. If this is set to larger than 4MB, content_validation will throw an </span>
<span class="sd">        error if enabled. However, if content_validation is not desired a size </span>
<span class="sd">        greater than 4MB may be optimal. Setting this below 4MB is not recommended.</span>
<span class="sd">    :ivar object key_encryption_key:</span>
<span class="sd">        The key-encryption-key optionally provided by the user. If provided, will be used to</span>
<span class="sd">        encrypt/decrypt in supported methods.</span>
<span class="sd">        For methods requiring decryption, either the key_encryption_key OR the resolver must be provided.</span>
<span class="sd">        If both are provided, the resolver will take precedence.</span>
<span class="sd">        Must implement the following methods for APIs requiring encryption:</span>
<span class="sd">        wrap_key(key)--wraps the specified key (bytes) using an algorithm of the user&#39;s choice. Returns the encrypted key as bytes.</span>
<span class="sd">        get_key_wrap_algorithm()--returns the algorithm used to wrap the specified symmetric key.</span>
<span class="sd">        get_kid()--returns a string key id for this key-encryption-key.</span>
<span class="sd">        Must implement the following methods for APIs requiring decryption:</span>
<span class="sd">        unwrap_key(key, algorithm)--returns the unwrapped form of the specified symmetric key using the string-specified algorithm.</span>
<span class="sd">        get_kid()--returns a string key id for this key-encryption-key.</span>
<span class="sd">    :ivar function key_resolver_function(kid):</span>
<span class="sd">        A function to resolve keys optionally provided by the user. If provided, will be used to decrypt in supported methods.</span>
<span class="sd">        For methods requiring decryption, either the key_encryption_key OR</span>
<span class="sd">        the resolver must be provided. If both are provided, the resolver will take precedence.</span>
<span class="sd">        It uses the kid string to return a key-encryption-key implementing the interface defined above.</span>
<span class="sd">    :ivar bool require_encryption:</span>
<span class="sd">        A flag that may be set to ensure that all messages successfully uploaded to the queue and all those downloaded and</span>
<span class="sd">        successfully read from the queue are/were encrypted while on the server. If this flag is set, all required </span>
<span class="sd">        parameters for encryption/decryption must be provided. See the above comments on the key_encryption_key and resolver.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">ABCMeta</span>
    <span class="n">MAX_SINGLE_GET_SIZE</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
    <span class="n">MAX_CHUNK_GET_SIZE</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">account_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sas_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                 <span class="n">is_emulated</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="n">DEFAULT_PROTOCOL</span><span class="p">,</span> <span class="n">endpoint_suffix</span><span class="o">=</span><span class="n">SERVICE_HOST_BASE</span><span class="p">,</span>
                 <span class="n">custom_domain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">request_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">connection_string</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        :param str account_name:</span>
<span class="sd">            The storage account name. This is used to authenticate requests </span>
<span class="sd">            signed with an account key and to construct the storage endpoint. It </span>
<span class="sd">            is required unless a connection string is given, or if a custom </span>
<span class="sd">            domain is used with anonymous authentication.</span>
<span class="sd">        :param str account_key:</span>
<span class="sd">            The storage account key. This is used for shared key authentication. </span>
<span class="sd">            If neither account key or sas token is specified, anonymous access </span>
<span class="sd">            will be used.</span>
<span class="sd">        :param str sas_token:</span>
<span class="sd">             A shared access signature token to use to authenticate requests </span>
<span class="sd">             instead of the account key. If account key and sas token are both </span>
<span class="sd">             specified, account key will be used to sign. If neither are </span>
<span class="sd">             specified, anonymous access will be used.</span>
<span class="sd">        :param bool is_emulated:</span>
<span class="sd">            Whether to use the emulator. Defaults to False. If specified, will </span>
<span class="sd">            override all other parameters besides connection string and request </span>
<span class="sd">            session.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            The protocol to use for requests. Defaults to https.</span>
<span class="sd">        :param str endpoint_suffix:</span>
<span class="sd">            The host base component of the url, minus the account name. Defaults </span>
<span class="sd">            to Azure (core.windows.net). Override this to use the China cloud </span>
<span class="sd">            (core.chinacloudapi.cn).</span>
<span class="sd">        :param str custom_domain:</span>
<span class="sd">            The custom domain to use. This can be set in the Azure Portal. For </span>
<span class="sd">            example, &#39;www.mydomain.com&#39;.</span>
<span class="sd">        :param requests.Session request_session:</span>
<span class="sd">            The session object to use for http requests.</span>
<span class="sd">        :param str connection_string:</span>
<span class="sd">            If specified, this will override all other parameters besides </span>
<span class="sd">            request session. See</span>
<span class="sd">            http://azure.microsoft.com/en-us/documentation/articles/storage-configure-connection-string/</span>
<span class="sd">            for the connection string format</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">service_params</span> <span class="o">=</span> <span class="n">_ServiceParameters</span><span class="o">.</span><span class="n">get_service_parameters</span><span class="p">(</span>
            <span class="s1">&#39;blob&#39;</span><span class="p">,</span>
            <span class="n">account_name</span><span class="o">=</span><span class="n">account_name</span><span class="p">,</span> 
            <span class="n">account_key</span><span class="o">=</span><span class="n">account_key</span><span class="p">,</span>
            <span class="n">sas_token</span><span class="o">=</span><span class="n">sas_token</span><span class="p">,</span> 
            <span class="n">is_emulated</span><span class="o">=</span><span class="n">is_emulated</span><span class="p">,</span>
            <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">,</span> 
            <span class="n">endpoint_suffix</span><span class="o">=</span><span class="n">endpoint_suffix</span><span class="p">,</span>
            <span class="n">custom_domain</span><span class="o">=</span><span class="n">custom_domain</span><span class="p">,</span>
            <span class="n">request_session</span><span class="o">=</span><span class="n">request_session</span><span class="p">,</span>
            <span class="n">connection_string</span><span class="o">=</span><span class="n">connection_string</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">BaseBlobService</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_params</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authentication</span> <span class="o">=</span> <span class="n">_StorageSharedKeyAuthentication</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">sas_token</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authentication</span> <span class="o">=</span> <span class="n">_StorageSASAuthentication</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sas_token</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authentication</span> <span class="o">=</span> <span class="n">_StorageNoAuthentication</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">require_encryption</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key_encryption_key</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key_resolver_function</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="BaseBlobService.make_blob_url"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.make_blob_url">[docs]</a>    <span class="k">def</span> <span class="nf">make_blob_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sas_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates the url to access a blob.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of blob.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            Protocol to use: &#39;http&#39; or &#39;https&#39;. If not specified, uses the</span>
<span class="sd">            protocol specified when BaseBlobService was initialized.</span>
<span class="sd">        :param str sas_token:</span>
<span class="sd">            Shared access signature token created with</span>
<span class="sd">            generate_shared_access_signature.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            An string value that uniquely identifies the snapshot. The value of</span>
<span class="sd">            this query parameter indicates the snapshot version.</span>
<span class="sd">        :return: blob access URL.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">://</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">protocol</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primary_endpoint</span><span class="p">,</span>
            <span class="n">container_name</span><span class="p">,</span>
            <span class="n">blob_name</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">snapshot</span> <span class="ow">and</span> <span class="n">sas_token</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">?snapshot=</span><span class="si">{}</span><span class="s1">&amp;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">snapshot</span><span class="p">,</span> <span class="n">sas_token</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">snapshot</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">?snapshot=</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">snapshot</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sas_token</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">?</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sas_token</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">url</span></div>

<div class="viewcode-block" id="BaseBlobService.generate_account_shared_access_signature"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.generate_account_shared_access_signature">[docs]</a>    <span class="k">def</span> <span class="nf">generate_account_shared_access_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource_types</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> 
                                        <span class="n">expiry</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Generates a shared access signature for the blob service.</span>
<span class="sd">        Use the returned signature with the sas_token parameter of any BlobService.</span>

<span class="sd">        :param ResourceTypes resource_types:</span>
<span class="sd">            Specifies the resource types that are accessible with the account SAS.</span>
<span class="sd">        :param AccountPermissions permission:</span>
<span class="sd">            The permissions associated with the shared access signature. The </span>
<span class="sd">            user is restricted to operations allowed by the permissions. </span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has been </span>
<span class="sd">            specified in an associated stored access policy.</span>
<span class="sd">        :param expiry:</span>
<span class="sd">            The time at which the shared access signature becomes invalid. </span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has </span>
<span class="sd">            been specified in an associated stored access policy. Azure will always </span>
<span class="sd">            convert values to UTC. If a date is passed in without timezone info, it </span>
<span class="sd">            is assumed to be UTC.</span>
<span class="sd">        :type expiry: date or str</span>
<span class="sd">        :param start:</span>
<span class="sd">            The time at which the shared access signature becomes valid. If </span>
<span class="sd">            omitted, start time for this call is assumed to be the time when the </span>
<span class="sd">            storage service receives the request. Azure will always convert values </span>
<span class="sd">            to UTC. If a date is passed in without timezone info, it is assumed to </span>
<span class="sd">            be UTC.</span>
<span class="sd">        :type start: date or str</span>
<span class="sd">        :param str ip:</span>
<span class="sd">            Specifies an IP address or a range of IP addresses from which to accept requests.</span>
<span class="sd">            If the IP address from which the request originates does not match the IP address</span>
<span class="sd">            or address range specified on the SAS token, the request is not authenticated.</span>
<span class="sd">            For example, specifying sip=168.1.5.65 or sip=168.1.5.60-168.1.5.70 on the SAS</span>
<span class="sd">            restricts the request to those IP addresses.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            Specifies the protocol permitted for a request made. The default value</span>
<span class="sd">            is https,http. See :class:`~azure.storage.models.Protocol` for possible values.</span>
<span class="sd">        :return: A Shared Access Signature (sas) token.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_name&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_key&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>

        <span class="n">sas</span> <span class="o">=</span> <span class="n">SharedAccessSignature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sas</span><span class="o">.</span><span class="n">generate_account</span><span class="p">(</span><span class="n">Services</span><span class="o">.</span><span class="n">BLOB</span><span class="p">,</span> <span class="n">resource_types</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> 
                                    <span class="n">expiry</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="n">ip</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.generate_container_shared_access_signature"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.generate_container_shared_access_signature">[docs]</a>    <span class="k">def</span> <span class="nf">generate_container_shared_access_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> 
                        <span class="n">permission</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">expiry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                        <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">cache_control</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">content_disposition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">content_encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">content_language</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">content_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Generates a shared access signature for the container.</span>
<span class="sd">        Use the returned signature with the sas_token parameter of any BlobService.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of container.</span>
<span class="sd">        :param ContainerPermissions permission:</span>
<span class="sd">            The permissions associated with the shared access signature. The </span>
<span class="sd">            user is restricted to operations allowed by the permissions.</span>
<span class="sd">            Permissions must be ordered read, write, delete, list.</span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has been </span>
<span class="sd">            specified in an associated stored access policy.</span>
<span class="sd">        :param expiry:</span>
<span class="sd">            The time at which the shared access signature becomes invalid. </span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has </span>
<span class="sd">            been specified in an associated stored access policy. Azure will always </span>
<span class="sd">            convert values to UTC. If a date is passed in without timezone info, it </span>
<span class="sd">            is assumed to be UTC.</span>
<span class="sd">        :type expiry: date or str</span>
<span class="sd">        :param start:</span>
<span class="sd">            The time at which the shared access signature becomes valid. If </span>
<span class="sd">            omitted, start time for this call is assumed to be the time when the </span>
<span class="sd">            storage service receives the request. Azure will always convert values </span>
<span class="sd">            to UTC. If a date is passed in without timezone info, it is assumed to </span>
<span class="sd">            be UTC.</span>
<span class="sd">        :type start: date or str</span>
<span class="sd">        :param str id:</span>
<span class="sd">            A unique value up to 64 characters in length that correlates to a </span>
<span class="sd">            stored access policy. To create a stored access policy, use </span>
<span class="sd">            set_blob_service_properties.</span>
<span class="sd">        :param str ip:</span>
<span class="sd">            Specifies an IP address or a range of IP addresses from which to accept requests.</span>
<span class="sd">            If the IP address from which the request originates does not match the IP address</span>
<span class="sd">            or address range specified on the SAS token, the request is not authenticated.</span>
<span class="sd">            For example, specifying sip=168.1.5.65 or sip=168.1.5.60-168.1.5.70 on the SAS</span>
<span class="sd">            restricts the request to those IP addresses.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            Specifies the protocol permitted for a request made. The default value</span>
<span class="sd">            is https,http. See :class:`~azure.storage.models.Protocol` for possible values.</span>
<span class="sd">        :param str cache_control:</span>
<span class="sd">            Response header value for Cache-Control when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_disposition:</span>
<span class="sd">            Response header value for Content-Disposition when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_encoding:</span>
<span class="sd">            Response header value for Content-Encoding when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_language:</span>
<span class="sd">            Response header value for Content-Language when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_type:</span>
<span class="sd">            Response header value for Content-Type when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :return: A Shared Access Signature (sas) token.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_name&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_key&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>

        <span class="n">sas</span> <span class="o">=</span> <span class="n">SharedAccessSignature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sas</span><span class="o">.</span><span class="n">generate_container</span><span class="p">(</span>
            <span class="n">container_name</span><span class="p">,</span>
            <span class="n">permission</span><span class="p">,</span> 
            <span class="n">expiry</span><span class="p">,</span>
            <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> 
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">ip</span><span class="o">=</span><span class="n">ip</span><span class="p">,</span>
            <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">,</span>
            <span class="n">cache_control</span><span class="o">=</span><span class="n">cache_control</span><span class="p">,</span>
            <span class="n">content_disposition</span><span class="o">=</span><span class="n">content_disposition</span><span class="p">,</span>
            <span class="n">content_encoding</span><span class="o">=</span><span class="n">content_encoding</span><span class="p">,</span>
            <span class="n">content_language</span><span class="o">=</span><span class="n">content_language</span><span class="p">,</span>
            <span class="n">content_type</span><span class="o">=</span><span class="n">content_type</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.generate_blob_shared_access_signature"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.generate_blob_shared_access_signature">[docs]</a>    <span class="k">def</span> <span class="nf">generate_blob_shared_access_signature</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">permission</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">expiry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">cache_control</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">content_disposition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">content_encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">content_language</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">content_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Generates a shared access signature for the blob.</span>
<span class="sd">        Use the returned signature with the sas_token parameter of any BlobService.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of blob.</span>
<span class="sd">        :param BlobPermissions permission:</span>
<span class="sd">            The permissions associated with the shared access signature. The </span>
<span class="sd">            user is restricted to operations allowed by the permissions.</span>
<span class="sd">            Permissions must be ordered read, write, delete, list.</span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has been </span>
<span class="sd">            specified in an associated stored access policy.</span>
<span class="sd">        :param expiry:</span>
<span class="sd">            The time at which the shared access signature becomes invalid. </span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has </span>
<span class="sd">            been specified in an associated stored access policy. Azure will always </span>
<span class="sd">            convert values to UTC. If a date is passed in without timezone info, it </span>
<span class="sd">            is assumed to be UTC.</span>
<span class="sd">        :type expiry: date or str</span>
<span class="sd">        :param start:</span>
<span class="sd">            The time at which the shared access signature becomes valid. If </span>
<span class="sd">            omitted, start time for this call is assumed to be the time when the </span>
<span class="sd">            storage service receives the request. Azure will always convert values </span>
<span class="sd">            to UTC. If a date is passed in without timezone info, it is assumed to </span>
<span class="sd">            be UTC.</span>
<span class="sd">        :type start: date or str</span>
<span class="sd">        :param str id:</span>
<span class="sd">            A unique value up to 64 characters in length that correlates to a </span>
<span class="sd">            stored access policy. To create a stored access policy, use :func:`~set_container_acl`.</span>
<span class="sd">        :param str ip:</span>
<span class="sd">            Specifies an IP address or a range of IP addresses from which to accept requests.</span>
<span class="sd">            If the IP address from which the request originates does not match the IP address</span>
<span class="sd">            or address range specified on the SAS token, the request is not authenticated.</span>
<span class="sd">            For example, specifying sip=168.1.5.65 or sip=168.1.5.60-168.1.5.70 on the SAS</span>
<span class="sd">            restricts the request to those IP addresses.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            Specifies the protocol permitted for a request made. The default value</span>
<span class="sd">            is https,http. See :class:`~azure.storage.models.Protocol` for possible values.</span>
<span class="sd">        :param str cache_control:</span>
<span class="sd">            Response header value for Cache-Control when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_disposition:</span>
<span class="sd">            Response header value for Content-Disposition when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_encoding:</span>
<span class="sd">            Response header value for Content-Encoding when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_language:</span>
<span class="sd">            Response header value for Content-Language when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_type:</span>
<span class="sd">            Response header value for Content-Type when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :return: A Shared Access Signature (sas) token.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_name&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_key&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>

        <span class="n">sas</span> <span class="o">=</span> <span class="n">SharedAccessSignature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sas</span><span class="o">.</span><span class="n">generate_blob</span><span class="p">(</span>
            <span class="n">container_name</span><span class="p">,</span>
            <span class="n">blob_name</span><span class="p">,</span>
            <span class="n">permission</span><span class="p">,</span> 
            <span class="n">expiry</span><span class="p">,</span>
            <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> 
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">ip</span><span class="o">=</span><span class="n">ip</span><span class="p">,</span>
            <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">,</span>
            <span class="n">cache_control</span><span class="o">=</span><span class="n">cache_control</span><span class="p">,</span>
            <span class="n">content_disposition</span><span class="o">=</span><span class="n">content_disposition</span><span class="p">,</span>
            <span class="n">content_encoding</span><span class="o">=</span><span class="n">content_encoding</span><span class="p">,</span>
            <span class="n">content_language</span><span class="o">=</span><span class="n">content_language</span><span class="p">,</span>
            <span class="n">content_type</span><span class="o">=</span><span class="n">content_type</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.list_containers"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.list_containers">[docs]</a>    <span class="k">def</span> <span class="nf">list_containers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">num_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">include_metadata</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
                        <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a generator to list the containers under the specified account.</span>
<span class="sd">        The generator will lazily follow the continuation tokens returned by</span>
<span class="sd">        the service and stop when all containers have been returned or num_results is reached.</span>

<span class="sd">        If num_results is specified and the account has more than that number of </span>
<span class="sd">        containers, the generator will have a populated next_marker field once it </span>
<span class="sd">        finishes. This marker can be used to create a new generator if more </span>
<span class="sd">        results are desired.</span>

<span class="sd">        :param str prefix:</span>
<span class="sd">            Filters the results to return only containers whose names</span>
<span class="sd">            begin with the specified prefix.</span>
<span class="sd">        :param int num_results:</span>
<span class="sd">            Specifies the maximum number of containers to return. A single list</span>
<span class="sd">            request may return up to 1000 contianers and potentially a continuation</span>
<span class="sd">            token which should be followed to get additional resutls.</span>
<span class="sd">        :param bool include_metadata:</span>
<span class="sd">            Specifies that container metadata be returned in the response.</span>
<span class="sd">        :param str marker:</span>
<span class="sd">            An opaque continuation token. This value can be retrieved from the </span>
<span class="sd">            next_marker field of a previous generator object if num_results was </span>
<span class="sd">            specified and that generator has finished enumerating results. If </span>
<span class="sd">            specified, this generator will begin returning results from the point </span>
<span class="sd">            where the previous generator stopped.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">include</span> <span class="o">=</span> <span class="s1">&#39;metadata&#39;</span> <span class="k">if</span> <span class="n">include_metadata</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">operation_context</span> <span class="o">=</span> <span class="n">_OperationContext</span><span class="p">(</span><span class="n">location_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="n">prefix</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">marker</span><span class="p">,</span> <span class="s1">&#39;max_results&#39;</span><span class="p">:</span> <span class="n">num_results</span><span class="p">,</span> 
                <span class="s1">&#39;include&#39;</span><span class="p">:</span> <span class="n">include</span><span class="p">,</span> <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">timeout</span><span class="p">,</span> <span class="s1">&#39;_context&#39;</span><span class="p">:</span> <span class="n">operation_context</span><span class="p">}</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_containers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ListGenerator</span><span class="p">(</span><span class="n">resp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_containers</span><span class="p">,</span> <span class="p">(),</span> <span class="n">kwargs</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_list_containers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                         <span class="n">include</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of the containers under the specified account.</span>

<span class="sd">        :param str prefix:</span>
<span class="sd">            Filters the results to return only containers whose names</span>
<span class="sd">            begin with the specified prefix.</span>
<span class="sd">        :param str marker:</span>
<span class="sd">            A string value that identifies the portion of the list</span>
<span class="sd">            to be returned with the next list operation. The operation returns</span>
<span class="sd">            a next_marker value within the response body if the list returned was</span>
<span class="sd">            not complete. The marker value may then be used in a subsequent</span>
<span class="sd">            call to request the next set of list items. The marker value is</span>
<span class="sd">            opaque to the client.</span>
<span class="sd">        :param int max_results:</span>
<span class="sd">            Specifies the maximum number of containers to return. A single list</span>
<span class="sd">            request may return up to 1000 contianers and potentially a continuation</span>
<span class="sd">            token which should be followed to get additional resutls.</span>
<span class="sd">        :param str include:</span>
<span class="sd">            Include this parameter to specify that the container&#39;s</span>
<span class="sd">            metadata be returned as part of the response body. set this</span>
<span class="sd">            parameter to string &#39;metadata&#39; to get container&#39;s metadata.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">()</span> 
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span>
            <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">prefix</span><span class="p">),</span>
            <span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">marker</span><span class="p">),</span>
            <span class="s1">&#39;maxresults&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">max_results</span><span class="p">),</span>
            <span class="s1">&#39;include&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">include</span><span class="p">),</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_containers</span><span class="p">,</span> <span class="n">operation_context</span><span class="o">=</span><span class="n">_context</span><span class="p">)</span>

<div class="viewcode-block" id="BaseBlobService.create_container"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.create_container">[docs]</a>    <span class="k">def</span> <span class="nf">create_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">public_access</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fail_on_exist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new container under the specified account. If the container</span>
<span class="sd">        with the same name already exists, the operation fails if</span>
<span class="sd">        fail_on_exist is True.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of container to create.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            A dict with name_value pairs to associate with the</span>
<span class="sd">            container as metadata. Example:{&#39;Category&#39;:&#39;test&#39;}</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param public_access:</span>
<span class="sd">            Possible values include: container, blob.</span>
<span class="sd">        :type public_access:</span>
<span class="sd">            One of the values listed in the :class:`~azure.storage.blob.models.PublicAccess` enum.</span>
<span class="sd">        :param bool fail_on_exist:</span>
<span class="sd">            Specify whether to throw an exception when the container exists.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: True if container is created, False if container already exists.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-blob-public-access&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">public_access</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">fail_on_exist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">_dont_fail_on_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="BaseBlobService.get_container_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_container_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_container_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata and system properties for the specified</span>
<span class="sd">        container. The data returned does not include the container&#39;s list of blobs.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            If specified, get_container_properties only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: properties for the specified container within a container object.</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.Container`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">)}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_container</span><span class="p">,</span> <span class="p">[</span><span class="n">container_name</span><span class="p">])</span></div>

<div class="viewcode-block" id="BaseBlobService.get_container_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_container_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_container_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata for the specified container.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            If specified, get_container_metadata only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return:</span>
<span class="sd">            A dictionary representing the container metadata name, value pairs.</span>
<span class="sd">        :rtype: a dict mapping str to str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">)}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.set_container_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.set_container_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">set_container_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets one or more user-defined name-value pairs for the specified</span>
<span class="sd">        container. Each call to this operation replaces all existing metadata</span>
<span class="sd">        attached to the container. To remove all metadata from the container,</span>
<span class="sd">        call this operation with no metadata dict.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            A dict containing name-value pairs to associate with the container as </span>
<span class="sd">            metadata. Example: {&#39;category&#39;:&#39;test&#39;}</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            If specified, set_container_metadata only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: ETag and last modified properties for the updated Container</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.ResourceProperties`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_base_properties</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.get_container_acl"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_container_acl">[docs]</a>    <span class="k">def</span> <span class="nf">get_container_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the permissions for the specified container.</span>
<span class="sd">        The permissions indicate whether container data may be accessed publicly.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param lease_id:</span>
<span class="sd">            If specified, get_container_acl only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: A dictionary of access policies associated with the container.</span>
<span class="sd">        :rtype:</span>
<span class="sd">            dict of str to :class:`.AccessPolicy` and a public_access property</span>
<span class="sd">            if public access is turned on</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;acl&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">)}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_signed_identifiers_and_access</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.set_container_acl"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.set_container_acl">[docs]</a>    <span class="k">def</span> <span class="nf">set_container_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">signed_identifiers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">public_access</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the permissions for the specified container or stored access </span>
<span class="sd">        policies that may be used with Shared Access Signatures. The permissions</span>
<span class="sd">        indicate whether blobs in a container may be accessed publicly.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param signed_identifiers:</span>
<span class="sd">            A dictionary of access policies to associate with the container. The </span>
<span class="sd">            dictionary may contain up to 5 elements. An empty dictionary </span>
<span class="sd">            will clear the access policies set on the service. </span>
<span class="sd">        :type signed_identifiers: dict of str to :class:`.AccessPolicy`</span>
<span class="sd">        :param public_access:</span>
<span class="sd">            Possible values include: container, blob.</span>
<span class="sd">        :type public_access: </span>
<span class="sd">            One of the values listed in the :class:`~azure.storage.blob.models.PublicAccess` enum.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            If specified, set_container_acl only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: ETag and last modified properties for the updated Container</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.ResourceProperties`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_access_policies</span><span class="p">(</span><span class="n">signed_identifiers</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;acl&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-blob-public-access&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">public_access</span><span class="p">),</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body</span><span class="p">(</span>
            <span class="n">_convert_signed_identifiers_to_xml</span><span class="p">(</span><span class="n">signed_identifiers</span><span class="p">))</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_base_properties</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.delete_container"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.delete_container">[docs]</a>    <span class="k">def</span> <span class="nf">delete_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">fail_not_exist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Marks the specified container for deletion. The container and any blobs</span>
<span class="sd">        contained within it are later deleted during garbage collection.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of container to delete.</span>
<span class="sd">        :param bool fail_not_exist:</span>
<span class="sd">            Specify whether to throw an exception when the container doesn&#39;t</span>
<span class="sd">            exist.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            If specified, delete_container only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">            Required if the container has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: True if container is deleted, False container doesn&#39;t exist.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;DELETE&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>          
        <span class="p">}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">fail_not_exist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">_dont_fail_not_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span></div>

    <span class="k">def</span> <span class="nf">_lease_container_impl</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">lease_action</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">,</span> <span class="n">lease_duration</span><span class="p">,</span>
        <span class="n">lease_break_period</span><span class="p">,</span> <span class="n">proposed_lease_id</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="p">,</span>
        <span class="n">if_unmodified_since</span><span class="p">,</span> <span class="n">timeout</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Establishes and manages a lease on a container.</span>
<span class="sd">        The Lease Container operation can be called in one of five modes</span>
<span class="sd">            Acquire, to request a new lease</span>
<span class="sd">            Renew, to renew an existing lease</span>
<span class="sd">            Change, to change the ID of an existing lease</span>
<span class="sd">            Release, to free the lease if it is no longer needed so that another</span>
<span class="sd">                client may immediately acquire a lease against the container</span>
<span class="sd">            Break, to end the lease but ensure that another client cannot acquire</span>
<span class="sd">                a new lease until the current lease period has expired</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str lease_action:</span>
<span class="sd">            Possible _LeaseActions values: acquire|renew|release|break|change</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the container has an active lease.</span>
<span class="sd">        :param int lease_duration:</span>
<span class="sd">            Specifies the duration of the lease, in seconds, or negative one</span>
<span class="sd">            (-1) for a lease that never expires. A non-infinite lease can be</span>
<span class="sd">            between 15 and 60 seconds. A lease duration cannot be changed</span>
<span class="sd">            using renew or change. For backwards compatibility, the default is</span>
<span class="sd">            60, and the value is only used on an acquire operation.</span>
<span class="sd">        :param int lease_break_period:</span>
<span class="sd">            For a break operation, this is the proposed duration of</span>
<span class="sd">            seconds that the lease should continue before it is broken, between</span>
<span class="sd">            0 and 60 seconds. This break period is only used if it is shorter</span>
<span class="sd">            than the time remaining on the lease. If longer, the time remaining</span>
<span class="sd">            on the lease is used. A new lease will not be available before the</span>
<span class="sd">            break period has expired, but the lease may be held for longer than</span>
<span class="sd">            the break period. If this header does not appear with a break</span>
<span class="sd">            operation, a fixed-duration lease breaks after the remaining lease</span>
<span class="sd">            period elapses, and an infinite lease breaks immediately.</span>
<span class="sd">        :param str proposed_lease_id:</span>
<span class="sd">            Optional for Acquire, required for Change. Proposed lease ID, in a</span>
<span class="sd">            GUID string format. The Blob service returns 400 (Invalid request)</span>
<span class="sd">            if the proposed lease ID is not in the correct format.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return:</span>
<span class="sd">            Response headers returned from the service call.</span>
<span class="sd">        :rtype: a dict mapping str to str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;lease_action&#39;</span><span class="p">,</span> <span class="n">lease_action</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;lease&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-action&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_action</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-duration&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_duration</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-break-period&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_break_period</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-proposed-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">proposed_lease_id</span><span class="p">),</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_lease</span><span class="p">)</span>

<div class="viewcode-block" id="BaseBlobService.acquire_container_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.acquire_container_lease">[docs]</a>    <span class="k">def</span> <span class="nf">acquire_container_lease</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">lease_duration</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">proposed_lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Requests a new lease. If the container does not have an active lease,</span>
<span class="sd">        the Blob service creates a lease on the container and returns a new</span>
<span class="sd">        lease ID.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param int lease_duration:</span>
<span class="sd">            Specifies the duration of the lease, in seconds, or negative one</span>
<span class="sd">            (-1) for a lease that never expires. A non-infinite lease can be</span>
<span class="sd">            between 15 and 60 seconds. A lease duration cannot be changed</span>
<span class="sd">            using renew or change. Default is -1 (infinite lease).</span>
<span class="sd">        :param str proposed_lease_id:</span>
<span class="sd">            Proposed lease ID, in a GUID string format. The Blob service returns</span>
<span class="sd">            400 (Invalid request) if the proposed lease ID is not in the correct format.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: the lease ID of the newly created lease.</span>
<span class="sd">        :return: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;lease_duration&#39;</span><span class="p">,</span> <span class="n">lease_duration</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lease_duration</span> <span class="ow">is</span> <span class="ow">not</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span>\
           <span class="p">(</span><span class="n">lease_duration</span> <span class="o">&lt;</span> <span class="mi">15</span> <span class="ow">or</span> <span class="n">lease_duration</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_INVALID_LEASE_DURATION</span><span class="p">)</span>

        <span class="n">lease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lease_container_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> 
                                           <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Acquire</span><span class="p">,</span>
                                           <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_id</span>
                                           <span class="n">lease_duration</span><span class="p">,</span>
                                           <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_break_period</span>
                                           <span class="n">proposed_lease_id</span><span class="p">,</span>
                                           <span class="n">if_modified_since</span><span class="p">,</span>
                                           <span class="n">if_unmodified_since</span><span class="p">,</span>
                                           <span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lease</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="BaseBlobService.renew_container_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.renew_container_lease">[docs]</a>    <span class="k">def</span> <span class="nf">renew_container_lease</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Renews the lease. The lease can be renewed if the lease ID specified</span>
<span class="sd">        matches that associated with the container. Note that</span>
<span class="sd">        the lease may be renewed even if it has expired as long as the container</span>
<span class="sd">        has not been leased again since the expiration of that lease. When you</span>
<span class="sd">        renew a lease, the lease duration clock resets.</span>
<span class="sd">        </span>
<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Lease ID for active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: the lease ID of the renewed lease.</span>
<span class="sd">        :return: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;lease_id&#39;</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">)</span>

        <span class="n">lease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lease_container_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> 
                                           <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Renew</span><span class="p">,</span>
                                           <span class="n">lease_id</span><span class="p">,</span>
                                           <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_duration</span>
                                           <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_break_period</span>
                                           <span class="kc">None</span><span class="p">,</span> <span class="c1"># proposed_lease_id</span>
                                           <span class="n">if_modified_since</span><span class="p">,</span>
                                           <span class="n">if_unmodified_since</span><span class="p">,</span>
                                           <span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lease</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="BaseBlobService.release_container_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.release_container_lease">[docs]</a>    <span class="k">def</span> <span class="nf">release_container_lease</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Release the lease. The lease may be released if the lease_id specified matches</span>
<span class="sd">        that associated with the container. Releasing the lease allows another client</span>
<span class="sd">        to immediately acquire the lease for the container as soon as the release is complete. </span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Lease ID for active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;lease_id&#39;</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lease_container_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> 
                                    <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Release</span><span class="p">,</span>
                                    <span class="n">lease_id</span><span class="p">,</span>
                                    <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_duration</span>
                                    <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_break_period</span>
                                    <span class="kc">None</span><span class="p">,</span> <span class="c1"># proposed_lease_id</span>
                                    <span class="n">if_modified_since</span><span class="p">,</span>
                                    <span class="n">if_unmodified_since</span><span class="p">,</span>
                                    <span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.break_container_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.break_container_lease">[docs]</a>    <span class="k">def</span> <span class="nf">break_container_lease</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">lease_break_period</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Break the lease, if the container has an active lease. Once a lease is</span>
<span class="sd">        broken, it cannot be renewed. Any authorized request can break the lease;</span>
<span class="sd">        the request is not required to specify a matching lease ID. When a lease</span>
<span class="sd">        is broken, the lease break period is allowed to elapse, during which time</span>
<span class="sd">        no lease operation except break and release can be performed on the container.</span>
<span class="sd">        When a lease is successfully broken, the response indicates the interval</span>
<span class="sd">        in seconds until a new lease can be acquired. </span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param int lease_break_period:</span>
<span class="sd">            This is the proposed duration of seconds that the lease</span>
<span class="sd">            should continue before it is broken, between 0 and 60 seconds. This</span>
<span class="sd">            break period is only used if it is shorter than the time remaining</span>
<span class="sd">            on the lease. If longer, the time remaining on the lease is used.</span>
<span class="sd">            A new lease will not be available before the break period has</span>
<span class="sd">            expired, but the lease may be held for longer than the break</span>
<span class="sd">            period. If this header does not appear with a break</span>
<span class="sd">            operation, a fixed-duration lease breaks after the remaining lease</span>
<span class="sd">            period elapses, and an infinite lease breaks immediately.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: Approximate time remaining in the lease period, in seconds.</span>
<span class="sd">        :return: int</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lease_break_period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">lease_break_period</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">lease_break_period</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_INVALID_LEASE_BREAK_PERIOD</span><span class="p">)</span>
        
        <span class="n">lease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lease_container_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> 
                                           <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Break</span><span class="p">,</span>
                                           <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_id</span>
                                           <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_duration</span>
                                           <span class="n">lease_break_period</span><span class="p">,</span>
                                           <span class="kc">None</span><span class="p">,</span> <span class="c1"># proposed_lease_id</span>
                                           <span class="n">if_modified_since</span><span class="p">,</span>
                                           <span class="n">if_unmodified_since</span><span class="p">,</span>
                                           <span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lease</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="BaseBlobService.change_container_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.change_container_lease">[docs]</a>    <span class="k">def</span> <span class="nf">change_container_lease</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">,</span> <span class="n">proposed_lease_id</span><span class="p">,</span>
        <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Change the lease ID of an active lease. A change must include the current</span>
<span class="sd">        lease ID and a new lease ID.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Lease ID for active lease.</span>
<span class="sd">        :param str proposed_lease_id:</span>
<span class="sd">            Proposed lease ID, in a GUID string format. The Blob service returns 400</span>
<span class="sd">            (Invalid request) if the proposed lease ID is not in the correct format.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;lease_id&#39;</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lease_container_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> 
                                    <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Change</span><span class="p">,</span>
                                    <span class="n">lease_id</span><span class="p">,</span>
                                    <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_duration</span>
                                    <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_break_period</span>
                                    <span class="n">proposed_lease_id</span><span class="p">,</span>
                                    <span class="n">if_modified_since</span><span class="p">,</span>
                                    <span class="n">if_unmodified_since</span><span class="p">,</span>
                                    <span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.list_blobs"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.list_blobs">[docs]</a>    <span class="k">def</span> <span class="nf">list_blobs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">num_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                   <span class="n">delimiter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a generator to list the blobs under the specified container.</span>
<span class="sd">        The generator will lazily follow the continuation tokens returned by</span>
<span class="sd">        the service and stop when all blobs have been returned or num_results is reached.</span>

<span class="sd">        If num_results is specified and the account has more than that number of </span>
<span class="sd">        blobs, the generator will have a populated next_marker field once it </span>
<span class="sd">        finishes. This marker can be used to create a new generator if more </span>
<span class="sd">        results are desired.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str prefix:</span>
<span class="sd">            Filters the results to return only blobs whose names</span>
<span class="sd">            begin with the specified prefix.</span>
<span class="sd">        :param int num_results:</span>
<span class="sd">            Specifies the maximum number of blobs to return,</span>
<span class="sd">            including all :class:`BlobPrefix` elements. If the request does not specify</span>
<span class="sd">            num_results or specifies a value greater than 5,000, the server will</span>
<span class="sd">            return up to 5,000 items. Setting num_results to a value less than</span>
<span class="sd">            or equal to zero results in error response code 400 (Bad Request).</span>
<span class="sd">        :param ~azure.storage.blob.models.Include include:</span>
<span class="sd">            Specifies one or more additional datasets to include in the response.</span>
<span class="sd">        :param str delimiter:</span>
<span class="sd">            When the request includes this parameter, the operation</span>
<span class="sd">            returns a :class:`~azure.storage.blob.models.BlobPrefix` element in the</span>
<span class="sd">            result list that acts as a placeholder for all blobs whose names begin</span>
<span class="sd">            with the same substring up to the appearance of the delimiter character.</span>
<span class="sd">            The delimiter may be a single character or a string.</span>
<span class="sd">        :param str marker:</span>
<span class="sd">            An opaque continuation token. This value can be retrieved from the </span>
<span class="sd">            next_marker field of a previous generator object if num_results was </span>
<span class="sd">            specified and that generator has finished enumerating results. If </span>
<span class="sd">            specified, this generator will begin returning results from the point </span>
<span class="sd">            where the previous generator stopped.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">operation_context</span> <span class="o">=</span> <span class="n">_OperationContext</span><span class="p">(</span><span class="n">location_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">container_name</span><span class="p">,)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="n">prefix</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">marker</span><span class="p">,</span> <span class="s1">&#39;max_results&#39;</span><span class="p">:</span> <span class="n">num_results</span><span class="p">,</span> 
                <span class="s1">&#39;include&#39;</span><span class="p">:</span> <span class="n">include</span><span class="p">,</span> <span class="s1">&#39;delimiter&#39;</span><span class="p">:</span> <span class="n">delimiter</span><span class="p">,</span> <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">timeout</span><span class="p">,</span>
                <span class="s1">&#39;_context&#39;</span><span class="p">:</span> <span class="n">operation_context</span><span class="p">}</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_blobs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ListGenerator</span><span class="p">(</span><span class="n">resp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_blobs</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_list_blobs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">max_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">_context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the list of blobs under the specified container.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :parm str prefix:</span>
<span class="sd">            Filters the results to return only blobs whose names</span>
<span class="sd">            begin with the specified prefix.</span>
<span class="sd">        :param str marker:</span>
<span class="sd">            A string value that identifies the portion of the list</span>
<span class="sd">            to be returned with the next list operation. The operation returns</span>
<span class="sd">            a next_marker value within the response body if the list returned was</span>
<span class="sd">            not complete. The marker value may then be used in a subsequent</span>
<span class="sd">            call to request the next set of list items. The marker value is</span>
<span class="sd">            opaque to the client.</span>
<span class="sd">        :param int max_results:</span>
<span class="sd">            Specifies the maximum number of blobs to return,</span>
<span class="sd">            including all :class:`BlobPrefix` elements. If the request does not specify</span>
<span class="sd">            max_results or specifies a value greater than 5,000, the server will</span>
<span class="sd">            return up to 5,000 items. Setting max_results to a value less than</span>
<span class="sd">            or equal to zero results in error response code 400 (Bad Request).</span>
<span class="sd">        :param str include:</span>
<span class="sd">            Specifies one or more datasets to include in the</span>
<span class="sd">            response. To specify more than one of these options on the URI,</span>
<span class="sd">            you must separate each option with a comma. Valid values are:</span>
<span class="sd">                snapshots:</span>
<span class="sd">                    Specifies that snapshots should be included in the</span>
<span class="sd">                    enumeration. Snapshots are listed from oldest to newest in</span>
<span class="sd">                    the response.</span>
<span class="sd">                metadata:</span>
<span class="sd">                    Specifies that blob metadata be returned in the response.</span>
<span class="sd">                uncommittedblobs:</span>
<span class="sd">                    Specifies that blobs for which blocks have been uploaded,</span>
<span class="sd">                    but which have not been committed using Put Block List</span>
<span class="sd">                    (REST API), be included in the response.</span>
<span class="sd">                copy:</span>
<span class="sd">                    Version 2012-02-12 and newer. Specifies that metadata</span>
<span class="sd">                    related to any current or previous Copy Blob operation</span>
<span class="sd">                    should be included in the response.</span>
<span class="sd">        :param str delimiter:</span>
<span class="sd">            When the request includes this parameter, the operation</span>
<span class="sd">            returns a :class:`BlobPrefix` element in the response body that acts as a</span>
<span class="sd">            placeholder for all blobs whose names begin with the same</span>
<span class="sd">            substring up to the appearance of the delimiter character. The</span>
<span class="sd">            delimiter may be a single character or a string.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span>
            <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">prefix</span><span class="p">),</span>
            <span class="s1">&#39;delimiter&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">delimiter</span><span class="p">),</span>
            <span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">marker</span><span class="p">),</span>
            <span class="s1">&#39;maxresults&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">max_results</span><span class="p">),</span>
            <span class="s1">&#39;include&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">include</span><span class="p">),</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_blob_list</span><span class="p">,</span> <span class="n">operation_context</span><span class="o">=</span><span class="n">_context</span><span class="p">)</span>

<div class="viewcode-block" id="BaseBlobService.get_blob_service_stats"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_blob_service_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_service_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieves statistics related to replication for the Blob service. It is </span>
<span class="sd">        only available when read-access geo-redundant replication is enabled for </span>
<span class="sd">        the storage account.</span>

<span class="sd">        With geo-redundant replication, Azure Storage maintains your data durable </span>
<span class="sd">        in two locations. In both locations, Azure Storage constantly maintains </span>
<span class="sd">        multiple healthy replicas of your data. The location where you read, </span>
<span class="sd">        create, update, or delete data is the primary storage account location. </span>
<span class="sd">        The primary location exists in the region you choose at the time you </span>
<span class="sd">        create an account via the Azure Management Azure classic portal, for </span>
<span class="sd">        example, North Central US. The location to which your data is replicated </span>
<span class="sd">        is the secondary location. The secondary location is automatically </span>
<span class="sd">        determined based on the location of the primary; it is in a second data </span>
<span class="sd">        center that resides in the same region as the primary location. Read-only </span>
<span class="sd">        access is available from the secondary location, if read-access geo-redundant </span>
<span class="sd">        replication is enabled for your storage account.</span>

<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: The blob service stats.</span>
<span class="sd">        :rtype: :class:`~azure.storage.models.ServiceStats`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;service&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;stats&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_service_stats</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.set_blob_service_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.set_blob_service_properties">[docs]</a>    <span class="k">def</span> <span class="nf">set_blob_service_properties</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">logging</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hour_metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minute_metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">cors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">target_version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the properties of a storage account&#39;s Blob service, including</span>
<span class="sd">        Azure Storage Analytics. If an element (ex Logging) is left as None, the </span>
<span class="sd">        existing settings on the service for that functionality are preserved.</span>

<span class="sd">        :param Logging logging:</span>
<span class="sd">            Groups the Azure Analytics Logging settings.</span>
<span class="sd">        :param Metrics hour_metrics:</span>
<span class="sd">            The hour metrics settings provide a summary of request </span>
<span class="sd">            statistics grouped by API in hourly aggregates for blobs.</span>
<span class="sd">        :param Metrics minute_metrics:</span>
<span class="sd">            The minute metrics settings provide request statistics </span>
<span class="sd">            for each minute for blobs.</span>
<span class="sd">        :param cors:</span>
<span class="sd">            You can include up to five CorsRule elements in the </span>
<span class="sd">            list. If an empty list is specified, all CORS rules will be deleted, </span>
<span class="sd">            and CORS will be disabled for the service.</span>
<span class="sd">        :type cors: list of :class:`CorsRule`</span>
<span class="sd">        :param string target_version:</span>
<span class="sd">            Indicates the default version to use for requests if an incoming </span>
<span class="sd">            request&#39;s version is not specified. </span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">()</span> 
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;service&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;properties&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body</span><span class="p">(</span>
            <span class="n">_convert_service_properties_to_xml</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">hour_metrics</span><span class="p">,</span> <span class="n">minute_metrics</span><span class="p">,</span> <span class="n">cors</span><span class="p">,</span> <span class="n">target_version</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.get_blob_service_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_blob_service_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_service_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the properties of a storage account&#39;s Blob service, including</span>
<span class="sd">        Azure Storage Analytics.</span>

<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: The blob service properties.</span>
<span class="sd">        :rtype:</span>
<span class="sd">            :class:`~azure.storage.models.ServiceProperties` with an attached</span>
<span class="sd">            target_version property</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">()</span> 
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;service&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;properties&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_service_properties</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.get_blob_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_blob_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_properties</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata, standard HTTP properties, and</span>
<span class="sd">        system properties for the blob. It does not return the content of the blob.</span>
<span class="sd">        Returns :class:`.Blob` with :class:`.BlobProperties` and a metadata dict.</span>
<span class="sd">        </span>
<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: a blob object including properties and metadata.</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.Blob`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;HEAD&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;snapshot&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">snapshot</span><span class="p">),</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_match</span><span class="p">),</span>
            <span class="s1">&#39;If-None-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_blob</span><span class="p">,</span> <span class="p">[</span><span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="p">])</span></div>

<div class="viewcode-block" id="BaseBlobService.set_blob_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.set_blob_properties">[docs]</a>    <span class="k">def</span> <span class="nf">set_blob_properties</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">content_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets system properties on the blob. If one property is set for the</span>
<span class="sd">        content_settings, all properties will be overriden.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param ~azure.storage.blob.models.ContentSettings content_settings:</span>
<span class="sd">            ContentSettings object used to set blob properties.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: ETag and last modified properties for the updated Blob</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.ResourceProperties`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;properties&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_match</span><span class="p">),</span>
            <span class="s1">&#39;If-None-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">content_settings</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">content_settings</span><span class="o">.</span><span class="n">_to_headers</span><span class="p">())</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_base_properties</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.exists"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.exists">[docs]</a>    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a boolean indicating whether the container exists (if blob_name </span>
<span class="sd">        is None), or otherwise a boolean indicating whether the blob exists.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of a container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of a blob. If None, the container will be checked for existence.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the snapshot.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: A boolean indicating whether the resource exists.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">blob_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_container_properties</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_blob_properties</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="n">snapshot</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">_dont_fail_not_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    <span class="k">def</span> <span class="nf">_get_blob</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">_context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a blob&#39;s content, metadata, and properties. You can also</span>
<span class="sd">        call this API to read a snapshot. You can specify a range if you don&#39;t</span>
<span class="sd">        need to download the blob in its entirety. If no range is specified,</span>
<span class="sd">        the full blob will be downloaded.</span>

<span class="sd">        See get_blob_to_* for high level functions that handle the download</span>
<span class="sd">        of large blobs with automatic chunking and progress notifications.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            When this is set to True and specified together with the Range header, </span>
<span class="sd">            the service returns the MD5 hash for the range, as long as the range </span>
<span class="sd">            is less than or equal to 4 MB in size.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: A Blob with content, properties, and metadata.</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.Blob`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_decryption_required</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">require_encryption</span><span class="p">,</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">key_encryption_key</span><span class="p">,</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">key_resolver_function</span><span class="p">)</span>

        <span class="n">start_offset</span><span class="p">,</span> <span class="n">end_offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_encryption_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_resolver_function</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">start_range</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Align the start of the range along a 16 byte block</span>
                <span class="n">start_offset</span> <span class="o">=</span> <span class="n">start_range</span> <span class="o">%</span> <span class="mi">16</span>
                <span class="n">start_range</span> <span class="o">-=</span> <span class="n">start_offset</span>

                <span class="c1"># Include an extra 16 bytes for the IV if necessary</span>
                <span class="c1"># Because of the previous offsetting, start_range will always</span>
                <span class="c1"># be a multiple of 16.</span>
                <span class="k">if</span> <span class="n">start_range</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">start_offset</span> <span class="o">+=</span> <span class="mi">16</span>
                    <span class="n">start_range</span> <span class="o">-=</span> <span class="mi">16</span>

            <span class="k">if</span> <span class="n">end_range</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Align the end of the range along a 16 byte block</span>
                <span class="n">end_offset</span> <span class="o">=</span> <span class="mi">15</span> <span class="o">-</span> <span class="p">(</span><span class="n">end_range</span> <span class="o">%</span> <span class="mi">16</span><span class="p">)</span>
                <span class="n">end_range</span> <span class="o">+=</span> <span class="n">end_offset</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;snapshot&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">snapshot</span><span class="p">),</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_match</span><span class="p">),</span>
            <span class="s1">&#39;If-None-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">_validate_and_format_range_headers</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span>
            <span class="n">start_range</span><span class="p">,</span>
            <span class="n">end_range</span><span class="p">,</span>
            <span class="n">start_range_required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">end_range_required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">check_content_md5</span><span class="o">=</span><span class="n">validate_content</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_blob</span><span class="p">,</span> 
                                     <span class="p">[</span><span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="p">,</span> <span class="n">validate_content</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">require_encryption</span><span class="p">,</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">key_encryption_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_resolver_function</span><span class="p">,</span>
                                      <span class="n">start_offset</span><span class="p">,</span> <span class="n">end_offset</span><span class="p">],</span>
                                     <span class="n">operation_context</span><span class="o">=</span><span class="n">_context</span><span class="p">)</span>

<div class="viewcode-block" id="BaseBlobService.get_blob_to_path"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_blob_to_path">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_to_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">open_mode</span><span class="o">=</span><span class="s1">&#39;wb&#39;</span><span class="p">,</span>
        <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a blob to a file path, with automatic chunking and progress</span>
<span class="sd">        notifications. Returns an instance of :class:`Blob` with </span>
<span class="sd">        properties and metadata.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str file_path:</span>
<span class="sd">            Path of file to write out to.</span>
<span class="sd">        :param str open_mode:</span>
<span class="sd">            Mode to use when opening the file. Note that specifying append only </span>
<span class="sd">            open_mode prevents parallel download. So, max_connections must be set </span>
<span class="sd">            to 1 if this open_mode is used.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If set to true, validates an MD5 hash for each retrieved portion of </span>
<span class="sd">            the blob. This is primarily valuable for detecting bitflips on the wire </span>
<span class="sd">            if using http instead of https as https (the default) will already </span>
<span class="sd">            validate. Note that the service will only return transactional MD5s </span>
<span class="sd">            for chunks 4MB or less so the first get request will be of size </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE instead of self.MAX_SINGLE_GET_SIZE. If </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE was set to greater than 4MB an error will be </span>
<span class="sd">            thrown. As computing the MD5 takes processing time and more requests </span>
<span class="sd">            will need to be done due to the reduced chunk size there may be some </span>
<span class="sd">            increase in latency.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) </span>
<span class="sd">            where current is the number of bytes transfered so far, and total is </span>
<span class="sd">            the size of the blob if known.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            If set to 2 or greater, an initial get will be done for the first </span>
<span class="sd">            self.MAX_SINGLE_GET_SIZE bytes of the blob. If this is the entire blob, </span>
<span class="sd">            the method returns at this point. If it is not, it will download the </span>
<span class="sd">            remaining data parallel using the number of threads equal to </span>
<span class="sd">            max_connections. Each chunk will be of size self.MAX_CHUNK_GET_SIZE.</span>
<span class="sd">            If set to 1, a single large get request will be done. This is not </span>
<span class="sd">            generally recommended but available if very few threads should be </span>
<span class="sd">            used, network requests are very expensive, or a non-seekable stream </span>
<span class="sd">            prevents parallel download. This may also be useful if many blobs are </span>
<span class="sd">            expected to be empty as an extra request is required for empty blobs </span>
<span class="sd">            if max_connections is greater than 1.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        :return: A Blob with properties and metadata. If max_connections is greater </span>
<span class="sd">            than 1, the content_md5 (if set on the blob) will not be returned. If you </span>
<span class="sd">            require this value, either use get_blob_properties or set max_connections </span>
<span class="sd">            to 1.</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.Blob`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_path&#39;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;open_mode&#39;</span><span class="p">,</span> <span class="n">open_mode</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">max_connections</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">open_mode</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_PARALLEL_NOT_SEEKABLE</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">open_mode</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">blob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_blob_to_stream</span><span class="p">(</span>
                <span class="n">container_name</span><span class="p">,</span>
                <span class="n">blob_name</span><span class="p">,</span>
                <span class="n">stream</span><span class="p">,</span>
                <span class="n">snapshot</span><span class="p">,</span>
                <span class="n">start_range</span><span class="p">,</span>
                <span class="n">end_range</span><span class="p">,</span>
                <span class="n">validate_content</span><span class="p">,</span>
                <span class="n">progress_callback</span><span class="p">,</span>
                <span class="n">max_connections</span><span class="p">,</span>
                <span class="n">lease_id</span><span class="p">,</span>
                <span class="n">if_modified_since</span><span class="p">,</span>
                <span class="n">if_unmodified_since</span><span class="p">,</span>
                <span class="n">if_match</span><span class="p">,</span>
                <span class="n">if_none_match</span><span class="p">,</span>
                <span class="n">timeout</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">blob</span></div>

<div class="viewcode-block" id="BaseBlobService.get_blob_to_stream"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_blob_to_stream">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_to_stream</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a blob to a stream, with automatic chunking and progress</span>
<span class="sd">        notifications. Returns an instance of :class:`Blob` with</span>
<span class="sd">        properties and metadata.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param io.IOBase stream:</span>
<span class="sd">            Opened stream to write to.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If set to true, validates an MD5 hash for each retrieved portion of </span>
<span class="sd">            the blob. This is primarily valuable for detecting bitflips on the wire </span>
<span class="sd">            if using http instead of https as https (the default) will already </span>
<span class="sd">            validate. Note that the service will only return transactional MD5s </span>
<span class="sd">            for chunks 4MB or less so the first get request will be of size </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE instead of self.MAX_SINGLE_GET_SIZE. If </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE was set to greater than 4MB an error will be </span>
<span class="sd">            thrown. As computing the MD5 takes processing time and more requests </span>
<span class="sd">            will need to be done due to the reduced chunk size there may be some </span>
<span class="sd">            increase in latency.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) </span>
<span class="sd">            where current is the number of bytes transfered so far, and total is </span>
<span class="sd">            the size of the blob if known.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            If set to 2 or greater, an initial get will be done for the first </span>
<span class="sd">            self.MAX_SINGLE_GET_SIZE bytes of the blob. If this is the entire blob, </span>
<span class="sd">            the method returns at this point. If it is not, it will download the </span>
<span class="sd">            remaining data parallel using the number of threads equal to </span>
<span class="sd">            max_connections. Each chunk will be of size self.MAX_CHUNK_GET_SIZE.</span>
<span class="sd">            If set to 1, a single large get request will be done. This is not </span>
<span class="sd">            generally recommended but available if very few threads should be </span>
<span class="sd">            used, network requests are very expensive, or a non-seekable stream </span>
<span class="sd">            prevents parallel download. This may also be useful if many blobs are </span>
<span class="sd">            expected to be empty as an extra request is required for empty blobs </span>
<span class="sd">            if max_connections is greater than 1.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        :return: A Blob with properties and metadata. If max_connections is greater </span>
<span class="sd">            than 1, the content_md5 (if set on the blob) will not be returned. If you </span>
<span class="sd">            require this value, either use get_blob_properties or set max_connections </span>
<span class="sd">            to 1.</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.Blob`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;stream&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>

        <span class="c1"># If the user explicitly sets max_connections to 1, do a single shot download</span>
        <span class="k">if</span> <span class="n">max_connections</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">blob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_blob</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                  <span class="n">blob_name</span><span class="p">,</span>
                                  <span class="n">snapshot</span><span class="p">,</span>
                                  <span class="n">start_range</span><span class="o">=</span><span class="n">start_range</span><span class="p">,</span>
                                  <span class="n">end_range</span><span class="o">=</span><span class="n">end_range</span><span class="p">,</span>
                                  <span class="n">validate_content</span><span class="o">=</span><span class="n">validate_content</span><span class="p">,</span>
                                  <span class="n">lease_id</span><span class="o">=</span><span class="n">lease_id</span><span class="p">,</span>
                                  <span class="n">if_modified_since</span><span class="o">=</span><span class="n">if_modified_since</span><span class="p">,</span>
                                  <span class="n">if_unmodified_since</span><span class="o">=</span><span class="n">if_unmodified_since</span><span class="p">,</span>
                                  <span class="n">if_match</span><span class="o">=</span><span class="n">if_match</span><span class="p">,</span>
                                  <span class="n">if_none_match</span><span class="o">=</span><span class="n">if_none_match</span><span class="p">,</span>
                                  <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

            <span class="c1"># Set the download size</span>
            <span class="n">download_size</span> <span class="o">=</span> <span class="n">blob</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_length</span>

        <span class="c1"># If max_connections is greater than 1, do the first get to establish the </span>
        <span class="c1"># size of the blob and get the first segment of data</span>
        <span class="k">else</span><span class="p">:</span>       
            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stream</span><span class="o">.</span><span class="n">seekable</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_PARALLEL_NOT_SEEKABLE</span><span class="p">)</span>

            <span class="c1"># The service only provides transactional MD5s for chunks under 4MB.           </span>
            <span class="c1"># If validate_content is on, get only self.MAX_CHUNK_GET_SIZE for the first </span>
            <span class="c1"># chunk so a transactional MD5 can be retrieved.</span>
            <span class="n">first_get_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_SINGLE_GET_SIZE</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_content</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_CHUNK_GET_SIZE</span>

            <span class="n">initial_request_start</span> <span class="o">=</span> <span class="n">start_range</span> <span class="k">if</span> <span class="n">start_range</span> <span class="k">else</span> <span class="mi">0</span>

            <span class="k">if</span> <span class="n">end_range</span> <span class="ow">and</span> <span class="n">end_range</span> <span class="o">-</span> <span class="n">start_range</span> <span class="o">&lt;</span> <span class="n">first_get_size</span><span class="p">:</span>
                <span class="n">initial_request_end</span> <span class="o">=</span> <span class="n">end_range</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">initial_request_end</span> <span class="o">=</span> <span class="n">initial_request_start</span> <span class="o">+</span> <span class="n">first_get_size</span> <span class="o">-</span> <span class="mi">1</span>

            <span class="c1"># Send a context object to make sure we always retry to the initial location</span>
            <span class="n">operation_context</span> <span class="o">=</span> <span class="n">_OperationContext</span><span class="p">(</span><span class="n">location_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">blob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_blob</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                      <span class="n">blob_name</span><span class="p">,</span>
                                      <span class="n">snapshot</span><span class="p">,</span>
                                      <span class="n">start_range</span><span class="o">=</span><span class="n">initial_request_start</span><span class="p">,</span>
                                      <span class="n">end_range</span><span class="o">=</span><span class="n">initial_request_end</span><span class="p">,</span>
                                      <span class="n">validate_content</span><span class="o">=</span><span class="n">validate_content</span><span class="p">,</span>
                                      <span class="n">lease_id</span><span class="o">=</span><span class="n">lease_id</span><span class="p">,</span>
                                      <span class="n">if_modified_since</span><span class="o">=</span><span class="n">if_modified_since</span><span class="p">,</span>
                                      <span class="n">if_unmodified_since</span><span class="o">=</span><span class="n">if_unmodified_since</span><span class="p">,</span>
                                      <span class="n">if_match</span><span class="o">=</span><span class="n">if_match</span><span class="p">,</span>
                                      <span class="n">if_none_match</span><span class="o">=</span><span class="n">if_none_match</span><span class="p">,</span>
                                      <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                      <span class="n">_context</span><span class="o">=</span><span class="n">operation_context</span><span class="p">)</span>

                <span class="c1"># Parse the total blob size and adjust the download size if ranges </span>
                <span class="c1"># were specified</span>
                <span class="n">blob_size</span> <span class="o">=</span> <span class="n">_parse_length_from_content_range</span><span class="p">(</span><span class="n">blob</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_range</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">end_range</span><span class="p">:</span>
                    <span class="c1"># Use the end_range unless it is over the end of the blob</span>
                    <span class="n">download_size</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">blob_size</span><span class="p">,</span> <span class="n">end_range</span> <span class="o">-</span> <span class="n">start_range</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">start_range</span><span class="p">:</span>
                    <span class="n">download_size</span> <span class="o">=</span> <span class="n">blob_size</span> <span class="o">-</span> <span class="n">start_range</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">download_size</span> <span class="o">=</span> <span class="n">blob_size</span>
            <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">start_range</span> <span class="ow">and</span> <span class="n">ex</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">416</span><span class="p">:</span>
                    <span class="c1"># Get range will fail on an empty blob. If the user did not </span>
                    <span class="c1"># request a range, do a regular get request in order to get </span>
                    <span class="c1"># any properties.</span>
                    <span class="n">blob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_blob</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                          <span class="n">blob_name</span><span class="p">,</span>
                                          <span class="n">snapshot</span><span class="p">,</span>
                                          <span class="n">validate_content</span><span class="o">=</span><span class="n">validate_content</span><span class="p">,</span>
                                          <span class="n">lease_id</span><span class="o">=</span><span class="n">lease_id</span><span class="p">,</span>
                                          <span class="n">if_modified_since</span><span class="o">=</span><span class="n">if_modified_since</span><span class="p">,</span>
                                          <span class="n">if_unmodified_since</span><span class="o">=</span><span class="n">if_unmodified_since</span><span class="p">,</span>
                                          <span class="n">if_match</span><span class="o">=</span><span class="n">if_match</span><span class="p">,</span>
                                          <span class="n">if_none_match</span><span class="o">=</span><span class="n">if_none_match</span><span class="p">,</span>
                                          <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                          <span class="n">_context</span><span class="o">=</span><span class="n">operation_context</span><span class="p">)</span>

                    <span class="c1"># Set the download size to empty</span>
                    <span class="n">download_size</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ex</span>

        <span class="c1"># Mark the first progress chunk. If the blob is small or this is a single </span>
        <span class="c1"># shot download, this is the only call</span>
        <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
            <span class="n">progress_callback</span><span class="p">(</span><span class="n">blob</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_length</span><span class="p">,</span> <span class="n">download_size</span><span class="p">)</span>

        <span class="c1"># Write the content to the user stream  </span>
        <span class="c1"># Clear blob content since output has been written to user stream   </span>
        <span class="k">if</span> <span class="n">blob</span><span class="o">.</span><span class="n">content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">blob</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="n">blob</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># If the blob is small or single shot download was used, the download is </span>
        <span class="c1"># complete at this point. If blob size is large, use parallel download.</span>
        <span class="k">if</span> <span class="n">blob</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_length</span> <span class="o">!=</span> <span class="n">download_size</span><span class="p">:</span>       
            <span class="c1"># Lock on the etag. This can be overriden by the user by specifying &#39;*&#39;</span>
            <span class="n">if_match</span> <span class="o">=</span> <span class="n">if_match</span> <span class="k">if</span> <span class="n">if_match</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">blob</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">etag</span>    
            
            <span class="n">end_blob</span> <span class="o">=</span> <span class="n">blob_size</span>
            <span class="k">if</span> <span class="n">end_range</span><span class="p">:</span>
                <span class="c1"># Use the end_range unless it is over the end of the blob</span>
                <span class="n">end_blob</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">blob_size</span><span class="p">,</span> <span class="n">end_range</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
               
            <span class="n">_download_blob_chunks</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">container_name</span><span class="p">,</span>
                <span class="n">blob_name</span><span class="p">,</span>
                <span class="n">download_size</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MAX_CHUNK_GET_SIZE</span><span class="p">,</span>
                <span class="n">first_get_size</span><span class="p">,</span>
                <span class="n">initial_request_end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="c1"># start where the first download ended</span>
                <span class="n">end_blob</span><span class="p">,</span>
                <span class="n">stream</span><span class="p">,</span>
                <span class="n">max_connections</span><span class="p">,</span>
                <span class="n">progress_callback</span><span class="p">,</span>
                <span class="n">validate_content</span><span class="p">,</span>
                <span class="n">lease_id</span><span class="p">,</span>
                <span class="n">if_modified_since</span><span class="p">,</span>
                <span class="n">if_unmodified_since</span><span class="p">,</span>
                <span class="n">if_match</span><span class="p">,</span>
                <span class="n">if_none_match</span><span class="p">,</span>
                <span class="n">timeout</span><span class="p">,</span>
                <span class="n">operation_context</span>
            <span class="p">)</span>

            <span class="c1"># Set the content length to the download size instead of the size of </span>
            <span class="c1"># the last range</span>
            <span class="n">blob</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_length</span> <span class="o">=</span> <span class="n">download_size</span>

            <span class="c1"># Overwrite the content range to the user requested range</span>
            <span class="n">blob</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_range</span> <span class="o">=</span> <span class="s1">&#39;bytes </span><span class="si">{0}</span><span class="s1">-</span><span class="si">{1}</span><span class="s1">/</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">start_range</span><span class="p">,</span> <span class="n">end_range</span><span class="p">,</span> <span class="n">blob_size</span><span class="p">)</span>

            <span class="c1"># Overwrite the content MD5 as it is the MD5 for the last range instead </span>
            <span class="c1"># of the stored MD5</span>
            <span class="c1"># TODO: Set to the stored MD5 when the service returns this</span>
            <span class="n">blob</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_md5</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">blob</span></div>
        
<div class="viewcode-block" id="BaseBlobService.get_blob_to_bytes"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_blob_to_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_to_bytes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a blob as an array of bytes, with automatic chunking and</span>
<span class="sd">        progress notifications. Returns an instance of :class:`Blob` with</span>
<span class="sd">        properties, metadata, and content.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If set to true, validates an MD5 hash for each retrieved portion of </span>
<span class="sd">            the blob. This is primarily valuable for detecting bitflips on the wire </span>
<span class="sd">            if using http instead of https as https (the default) will already </span>
<span class="sd">            validate. Note that the service will only return transactional MD5s </span>
<span class="sd">            for chunks 4MB or less so the first get request will be of size </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE instead of self.MAX_SINGLE_GET_SIZE. If </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE was set to greater than 4MB an error will be </span>
<span class="sd">            thrown. As computing the MD5 takes processing time and more requests </span>
<span class="sd">            will need to be done due to the reduced chunk size there may be some </span>
<span class="sd">            increase in latency.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) </span>
<span class="sd">            where current is the number of bytes transfered so far, and total is </span>
<span class="sd">            the size of the blob if known.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            If set to 2 or greater, an initial get will be done for the first </span>
<span class="sd">            self.MAX_SINGLE_GET_SIZE bytes of the blob. If this is the entire blob, </span>
<span class="sd">            the method returns at this point. If it is not, it will download the </span>
<span class="sd">            remaining data parallel using the number of threads equal to </span>
<span class="sd">            max_connections. Each chunk will be of size self.MAX_CHUNK_GET_SIZE.</span>
<span class="sd">            If set to 1, a single large get request will be done. This is not </span>
<span class="sd">            generally recommended but available if very few threads should be </span>
<span class="sd">            used, network requests are very expensive, or a non-seekable stream </span>
<span class="sd">            prevents parallel download. This may also be useful if many blobs are </span>
<span class="sd">            expected to be empty as an extra request is required for empty blobs </span>
<span class="sd">            if max_connections is greater than 1.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        :return: A Blob with properties and metadata. If max_connections is greater </span>
<span class="sd">            than 1, the content_md5 (if set on the blob) will not be returned. If you </span>
<span class="sd">            require this value, either use get_blob_properties or set max_connections </span>
<span class="sd">            to 1.</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.Blob`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>

        <span class="n">stream</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
        <span class="n">blob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_blob_to_stream</span><span class="p">(</span>
            <span class="n">container_name</span><span class="p">,</span>
            <span class="n">blob_name</span><span class="p">,</span>
            <span class="n">stream</span><span class="p">,</span>
            <span class="n">snapshot</span><span class="p">,</span>
            <span class="n">start_range</span><span class="p">,</span>
            <span class="n">end_range</span><span class="p">,</span>
            <span class="n">validate_content</span><span class="p">,</span>
            <span class="n">progress_callback</span><span class="p">,</span>
            <span class="n">max_connections</span><span class="p">,</span>
            <span class="n">lease_id</span><span class="p">,</span>
            <span class="n">if_modified_since</span><span class="p">,</span>
            <span class="n">if_unmodified_since</span><span class="p">,</span>
            <span class="n">if_match</span><span class="p">,</span>
            <span class="n">if_none_match</span><span class="p">,</span>
            <span class="n">timeout</span><span class="p">)</span>

        <span class="n">blob</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">blob</span></div>

<div class="viewcode-block" id="BaseBlobService.get_blob_to_text"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_blob_to_text">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_to_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a blob as unicode text, with automatic chunking and progress</span>
<span class="sd">        notifications. Returns an instance of :class:`Blob` with</span>
<span class="sd">        properties, metadata, and content.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str encoding:</span>
<span class="sd">            Python encoding to use when decoding the blob data.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the blob.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of blob.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If set to true, validates an MD5 hash for each retrieved portion of </span>
<span class="sd">            the blob. This is primarily valuable for detecting bitflips on the wire </span>
<span class="sd">            if using http instead of https as https (the default) will already </span>
<span class="sd">            validate. Note that the service will only return transactional MD5s </span>
<span class="sd">            for chunks 4MB or less so the first get request will be of size </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE instead of self.MAX_SINGLE_GET_SIZE. If </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE was set to greater than 4MB an error will be </span>
<span class="sd">            thrown. As computing the MD5 takes processing time and more requests </span>
<span class="sd">            will need to be done due to the reduced chunk size there may be some </span>
<span class="sd">            increase in latency.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) </span>
<span class="sd">            where current is the number of bytes transfered so far, and total is </span>
<span class="sd">            the size of the blob if known.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            If set to 2 or greater, an initial get will be done for the first </span>
<span class="sd">            self.MAX_SINGLE_GET_SIZE bytes of the blob. If this is the entire blob, </span>
<span class="sd">            the method returns at this point. If it is not, it will download the </span>
<span class="sd">            remaining data parallel using the number of threads equal to </span>
<span class="sd">            max_connections. Each chunk will be of size self.MAX_CHUNK_GET_SIZE.</span>
<span class="sd">            If set to 1, a single large get request will be done. This is not </span>
<span class="sd">            generally recommended but available if very few threads should be </span>
<span class="sd">            used, network requests are very expensive, or a non-seekable stream </span>
<span class="sd">            prevents parallel download. This may also be useful if many blobs are </span>
<span class="sd">            expected to be empty as an extra request is required for empty blobs </span>
<span class="sd">            if max_connections is greater than 1.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        :return: A Blob with properties and metadata. If max_connections is greater </span>
<span class="sd">            than 1, the content_md5 (if set on the blob) will not be returned. If you </span>
<span class="sd">            require this value, either use get_blob_properties or set max_connections </span>
<span class="sd">            to 1.</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.Blob`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;encoding&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>

        <span class="n">blob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_blob_to_bytes</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                        <span class="n">blob_name</span><span class="p">,</span>
                                        <span class="n">snapshot</span><span class="p">,</span>
                                        <span class="n">start_range</span><span class="p">,</span>
                                        <span class="n">end_range</span><span class="p">,</span>
                                        <span class="n">validate_content</span><span class="p">,</span>
                                        <span class="n">progress_callback</span><span class="p">,</span>
                                        <span class="n">max_connections</span><span class="p">,</span>
                                        <span class="n">lease_id</span><span class="p">,</span>
                                        <span class="n">if_modified_since</span><span class="p">,</span>
                                        <span class="n">if_unmodified_since</span><span class="p">,</span>
                                        <span class="n">if_match</span><span class="p">,</span>
                                        <span class="n">if_none_match</span><span class="p">,</span>
                                        <span class="n">timeout</span><span class="p">)</span>
        <span class="n">blob</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">blob</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">blob</span></div>

<div class="viewcode-block" id="BaseBlobService.get_blob_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.get_blob_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata for the specified blob or snapshot.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            The snapshot parameter is an opaque value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return:</span>
<span class="sd">            A dictionary representing the blob metadata name, value pairs.</span>
<span class="sd">        :rtype: a dict mapping str to str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">(</span><span class="n">secondary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;snapshot&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">snapshot</span><span class="p">),</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_match</span><span class="p">),</span>
            <span class="s1">&#39;If-None-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">),</span>
        <span class="p">}</span>     

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.set_blob_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.set_blob_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">set_blob_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                          <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets user-defined metadata for the specified blob as one or more</span>
<span class="sd">        name-value pairs.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Dict containing name and value pairs. Each call to this operation</span>
<span class="sd">            replaces all existing metadata attached to the blob. To remove all</span>
<span class="sd">            metadata from the blob, call this operation with no metadata headers.</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: ETag and last modified properties for the updated Blob</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.ResourceProperties`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_match</span><span class="p">),</span>
            <span class="s1">&#39;If-None-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_base_properties</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_lease_blob_impl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                         <span class="n">lease_action</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">,</span>
                         <span class="n">lease_duration</span><span class="p">,</span> <span class="n">lease_break_period</span><span class="p">,</span>
                         <span class="n">proposed_lease_id</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="p">,</span>
                         <span class="n">if_unmodified_since</span><span class="p">,</span> <span class="n">if_match</span><span class="p">,</span> <span class="n">if_none_match</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Establishes and manages a lease on a blob for write and delete operations.</span>
<span class="sd">        The Lease Blob operation can be called in one of five modes:</span>
<span class="sd">            Acquire, to request a new lease.</span>
<span class="sd">            Renew, to renew an existing lease.</span>
<span class="sd">            Change, to change the ID of an existing lease.</span>
<span class="sd">            Release, to free the lease if it is no longer needed so that another</span>
<span class="sd">                client may immediately acquire a lease against the blob.</span>
<span class="sd">            Break, to end the lease but ensure that another client cannot acquire</span>
<span class="sd">                a new lease until the current lease period has expired.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str lease_action:</span>
<span class="sd">            Possible _LeaseActions acquire|renew|release|break|change</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param int lease_duration:</span>
<span class="sd">            Specifies the duration of the lease, in seconds, or negative one</span>
<span class="sd">            (-1) for a lease that never expires. A non-infinite lease can be</span>
<span class="sd">            between 15 and 60 seconds. A lease duration cannot be changed</span>
<span class="sd">            using renew or change.</span>
<span class="sd">        :param int lease_break_period:</span>
<span class="sd">            For a break operation, this is the proposed duration of</span>
<span class="sd">            seconds that the lease should continue before it is broken, between</span>
<span class="sd">            0 and 60 seconds. This break period is only used if it is shorter</span>
<span class="sd">            than the time remaining on the lease. If longer, the time remaining</span>
<span class="sd">            on the lease is used. A new lease will not be available before the</span>
<span class="sd">            break period has expired, but the lease may be held for longer than</span>
<span class="sd">            the break period. If this header does not appear with a break</span>
<span class="sd">            operation, a fixed-duration lease breaks after the remaining lease</span>
<span class="sd">            period elapses, and an infinite lease breaks immediately.</span>
<span class="sd">        :param str proposed_lease_id:</span>
<span class="sd">            Optional for acquire, required for change. Proposed lease ID, in a</span>
<span class="sd">            GUID string format. The Blob service returns 400 (Invalid request)</span>
<span class="sd">            if the proposed lease ID is not in the correct format. </span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return:</span>
<span class="sd">            Response headers returned from the service call.</span>
<span class="sd">        :rtype: a dict mapping str to str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;lease_action&#39;</span><span class="p">,</span> <span class="n">lease_action</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;lease&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-action&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_action</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-duration&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_duration</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-break-period&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_break_period</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-proposed-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">proposed_lease_id</span><span class="p">),</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_match</span><span class="p">),</span>
            <span class="s1">&#39;If-None-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_lease</span><span class="p">)</span>

<div class="viewcode-block" id="BaseBlobService.acquire_blob_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.acquire_blob_lease">[docs]</a>    <span class="k">def</span> <span class="nf">acquire_blob_lease</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                           <span class="n">lease_duration</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">proposed_lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Requests a new lease. If the blob does not have an active lease, the Blob</span>
<span class="sd">        service creates a lease on the blob and returns a new lease ID.</span>
<span class="sd">        </span>
<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param int lease_duration:</span>
<span class="sd">            Specifies the duration of the lease, in seconds, or negative one</span>
<span class="sd">            (-1) for a lease that never expires. A non-infinite lease can be</span>
<span class="sd">            between 15 and 60 seconds. A lease duration cannot be changed</span>
<span class="sd">            using renew or change. Default is -1 (infinite lease).</span>
<span class="sd">        :param str proposed_lease_id:</span>
<span class="sd">            Proposed lease ID, in a GUID string format. The Blob service</span>
<span class="sd">            returns 400 (Invalid request) if the proposed lease ID is not</span>
<span class="sd">            in the correct format. </span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: the lease ID of the newly created lease.</span>
<span class="sd">        :return: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;lease_duration&#39;</span><span class="p">,</span> <span class="n">lease_duration</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">lease_duration</span> <span class="ow">is</span> <span class="ow">not</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span>\
           <span class="p">(</span><span class="n">lease_duration</span> <span class="o">&lt;</span> <span class="mi">15</span> <span class="ow">or</span> <span class="n">lease_duration</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_INVALID_LEASE_DURATION</span><span class="p">)</span>
        <span class="n">lease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lease_blob_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                      <span class="n">blob_name</span><span class="p">,</span>
                                      <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Acquire</span><span class="p">,</span>
                                      <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_id</span>
                                      <span class="n">lease_duration</span><span class="p">,</span>
                                      <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_break_period</span>
                                      <span class="n">proposed_lease_id</span><span class="p">,</span>
                                      <span class="n">if_modified_since</span><span class="p">,</span>
                                      <span class="n">if_unmodified_since</span><span class="p">,</span>
                                      <span class="n">if_match</span><span class="p">,</span>
                                      <span class="n">if_none_match</span><span class="p">,</span>
                                      <span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lease</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="BaseBlobService.renew_blob_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.renew_blob_lease">[docs]</a>    <span class="k">def</span> <span class="nf">renew_blob_lease</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                         <span class="n">lease_id</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Renews the lease. The lease can be renewed if the lease ID specified on</span>
<span class="sd">        the request matches that associated with the blob. Note that the lease may</span>
<span class="sd">        be renewed even if it has expired as long as the blob has not been modified</span>
<span class="sd">        or leased again since the expiration of that lease. When you renew a lease,</span>
<span class="sd">        the lease duration clock resets. </span>
<span class="sd">        </span>
<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Lease ID for active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: the lease ID of the renewed lease.</span>
<span class="sd">        :return: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;lease_id&#39;</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">)</span>

        <span class="n">lease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lease_blob_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                      <span class="n">blob_name</span><span class="p">,</span>
                                      <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Renew</span><span class="p">,</span>
                                      <span class="n">lease_id</span><span class="p">,</span>
                                      <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_duration</span>
                                      <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_break_period</span>
                                      <span class="kc">None</span><span class="p">,</span> <span class="c1"># proposed_lease_id</span>
                                      <span class="n">if_modified_since</span><span class="p">,</span>
                                      <span class="n">if_unmodified_since</span><span class="p">,</span>
                                      <span class="n">if_match</span><span class="p">,</span>
                                      <span class="n">if_none_match</span><span class="p">,</span>
                                      <span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lease</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="BaseBlobService.release_blob_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.release_blob_lease">[docs]</a>    <span class="k">def</span> <span class="nf">release_blob_lease</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                           <span class="n">lease_id</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Releases the lease. The lease may be released if the lease ID specified on the</span>
<span class="sd">        request matches that associated with the blob. Releasing the lease allows another</span>
<span class="sd">        client to immediately acquire the lease for the blob as soon as the release is complete. </span>
<span class="sd">        </span>
<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Lease ID for active lease.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;lease_id&#39;</span><span class="p">,</span> <span class="n">lease_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lease_blob_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                <span class="n">blob_name</span><span class="p">,</span>
                                <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Release</span><span class="p">,</span>
                                <span class="n">lease_id</span><span class="p">,</span>
                                <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_duration</span>
                                <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_break_period</span>
                                <span class="kc">None</span><span class="p">,</span> <span class="c1"># proposed_lease_id</span>
                                <span class="n">if_modified_since</span><span class="p">,</span>
                                <span class="n">if_unmodified_since</span><span class="p">,</span>
                                <span class="n">if_match</span><span class="p">,</span>
                                <span class="n">if_none_match</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.break_blob_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.break_blob_lease">[docs]</a>    <span class="k">def</span> <span class="nf">break_blob_lease</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                         <span class="n">lease_break_period</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Breaks the lease, if the blob has an active lease. Once a lease is broken,</span>
<span class="sd">        it cannot be renewed. Any authorized request can break the lease; the request</span>
<span class="sd">        is not required to specify a matching lease ID. When a lease is broken,</span>
<span class="sd">        the lease break period is allowed to elapse, during which time no lease operation</span>
<span class="sd">        except break and release can be performed on the blob. When a lease is successfully</span>
<span class="sd">        broken, the response indicates the interval in seconds until a new lease can be acquired. </span>

<span class="sd">        A lease that has been broken can also be released, in which case another client may</span>
<span class="sd">        immediately acquire the lease on the blob.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param int lease_break_period:</span>
<span class="sd">            For a break operation, this is the proposed duration of</span>
<span class="sd">            seconds that the lease should continue before it is broken, between</span>
<span class="sd">            0 and 60 seconds. This break period is only used if it is shorter</span>
<span class="sd">            than the time remaining on the lease. If longer, the time remaining</span>
<span class="sd">            on the lease is used. A new lease will not be available before the</span>
<span class="sd">            break period has expired, but the lease may be held for longer than</span>
<span class="sd">            the break period. If this header does not appear with a break</span>
<span class="sd">            operation, a fixed-duration lease breaks after the remaining lease</span>
<span class="sd">            period elapses, and an infinite lease breaks immediately.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: Approximate time remaining in the lease period, in seconds.</span>
<span class="sd">        :return: int</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lease_break_period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">lease_break_period</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">lease_break_period</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_INVALID_LEASE_BREAK_PERIOD</span><span class="p">)</span>

        <span class="n">lease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lease_blob_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                      <span class="n">blob_name</span><span class="p">,</span>
                                      <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Break</span><span class="p">,</span>
                                      <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_id</span>
                                      <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_duration</span>
                                      <span class="n">lease_break_period</span><span class="p">,</span>
                                      <span class="kc">None</span><span class="p">,</span> <span class="c1"># proposed_lease_id</span>
                                      <span class="n">if_modified_since</span><span class="p">,</span>
                                      <span class="n">if_unmodified_since</span><span class="p">,</span>
                                      <span class="n">if_match</span><span class="p">,</span>
                                      <span class="n">if_none_match</span><span class="p">,</span>
                                      <span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lease</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="BaseBlobService.change_blob_lease"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.change_blob_lease">[docs]</a>    <span class="k">def</span> <span class="nf">change_blob_lease</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                         <span class="n">lease_id</span><span class="p">,</span>
                         <span class="n">proposed_lease_id</span><span class="p">,</span>
                         <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Changes the lease ID of an active lease. A change must include the current</span>
<span class="sd">        lease ID and a new lease ID.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param str proposed_lease_id:</span>
<span class="sd">            Proposed lease ID, in a GUID string format. The Blob service returns</span>
<span class="sd">            400 (Invalid request) if the proposed lease ID is not in the correct format. </span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lease_blob_impl</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                <span class="n">blob_name</span><span class="p">,</span>
                                <span class="n">_LeaseActions</span><span class="o">.</span><span class="n">Change</span><span class="p">,</span>
                                <span class="n">lease_id</span><span class="p">,</span>
                                <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_duration</span>
                                <span class="kc">None</span><span class="p">,</span> <span class="c1"># lease_break_period</span>
                                <span class="n">proposed_lease_id</span><span class="p">,</span>
                                <span class="n">if_modified_since</span><span class="p">,</span>
                                <span class="n">if_unmodified_since</span><span class="p">,</span>
                                <span class="n">if_match</span><span class="p">,</span>
                                <span class="n">if_none_match</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.snapshot_blob"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.snapshot_blob">[docs]</a>    <span class="k">def</span> <span class="nf">snapshot_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                      <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a read-only snapshot of a blob.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Specifies a user-defined name-value pair associated with the blob.</span>
<span class="sd">            If no name-value pairs are specified, the operation will copy the</span>
<span class="sd">            base blob metadata to the snapshot. If one or more name-value pairs</span>
<span class="sd">            are specified, the snapshot is created with the specified metadata,</span>
<span class="sd">            and metadata is not copied from the base blob.</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: snapshot properties</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.Blob`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;snapshot&#39;</span><span class="p">,</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_match</span><span class="p">),</span>
            <span class="s1">&#39;If-None-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_snapshot_blob</span><span class="p">,</span> <span class="p">[</span><span class="n">blob_name</span><span class="p">])</span></div>

<div class="viewcode-block" id="BaseBlobService.copy_blob"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.copy_blob">[docs]</a>    <span class="k">def</span> <span class="nf">copy_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">copy_source</span><span class="p">,</span>
                  <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">source_if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">source_if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">source_if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">source_lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Copies a blob asynchronously. This operation returns a copy operation </span>
<span class="sd">        properties object, including a copy ID you can use to check or abort the </span>
<span class="sd">        copy operation. The Blob service copies blobs on a best-effort basis.</span>

<span class="sd">        The source blob for a copy operation may be a block blob, an append blob, </span>
<span class="sd">        or a page blob. If the destination blob already exists, it must be of the </span>
<span class="sd">        same blob type as the source blob. Any existing destination blob will be </span>
<span class="sd">        overwritten. The destination blob cannot be modified while a copy operation </span>
<span class="sd">        is in progress.</span>

<span class="sd">        When copying from a page blob, the Blob service creates a destination page </span>
<span class="sd">        blob of the source blob’s length, initially containing all zeroes. Then </span>
<span class="sd">        the source page ranges are enumerated, and non-empty ranges are copied. </span>

<span class="sd">        For a block blob or an append blob, the Blob service creates a committed </span>
<span class="sd">        blob of zero length before returning from this operation. When copying </span>
<span class="sd">        from a block blob, all committed blocks and their block IDs are copied. </span>
<span class="sd">        Uncommitted blocks are not copied. At the end of the copy operation, the </span>
<span class="sd">        destination blob will have the same committed block count as the source.</span>

<span class="sd">        When copying from an append blob, all committed blocks are copied. At the </span>
<span class="sd">        end of the copy operation, the destination blob will have the same committed </span>
<span class="sd">        block count as the source.</span>

<span class="sd">        For all blob types, you can call get_blob_properties on the destination </span>
<span class="sd">        blob to check the status of the copy operation. The final blob will be </span>
<span class="sd">        committed when the copy completes.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of the destination container. The container must exist.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of the destination blob. If the destination blob exists, it will </span>
<span class="sd">            be overwritten. Otherwise, it will be created.</span>
<span class="sd">        :param str copy_source:</span>
<span class="sd">            A URL of up to 2 KB in length that specifies an Azure file or blob. </span>
<span class="sd">            The value should be URL-encoded as it would appear in a request URI. </span>
<span class="sd">            If the source is in another account, the source must either be public </span>
<span class="sd">            or must be authenticated via a shared access signature. If the source </span>
<span class="sd">            is public, no authentication is required.</span>
<span class="sd">            Examples:</span>
<span class="sd">            https://myaccount.blob.core.windows.net/mycontainer/myblob</span>
<span class="sd">            https://myaccount.blob.core.windows.net/mycontainer/myblob?snapshot=&lt;DateTime&gt;</span>
<span class="sd">            https://otheraccount.blob.core.windows.net/mycontainer/myblob?sastoken</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Name-value pairs associated with the blob as metadata. If no name-value </span>
<span class="sd">            pairs are specified, the operation will copy the metadata from the </span>
<span class="sd">            source blob or file to the destination blob. If one or more name-value </span>
<span class="sd">            pairs are specified, the destination blob is created with the specified </span>
<span class="sd">            metadata, and metadata is not copied from the source blob or file. </span>
<span class="sd">        :type metadata: A dict mapping str to str.</span>
<span class="sd">        :param datetime source_if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.  </span>
<span class="sd">            Specify this conditional header to copy the blob only if the source</span>
<span class="sd">            blob has been modified since the specified date/time.</span>
<span class="sd">        :param datetime source_if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this conditional header to copy the blob only if the source blob</span>
<span class="sd">            has not been modified since the specified date/time.</span>
<span class="sd">        :param ETag source_if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this conditional</span>
<span class="sd">            header to copy the source blob only if its ETag matches the value</span>
<span class="sd">            specified. If the ETag values do not match, the Blob service returns</span>
<span class="sd">            status code 412 (Precondition Failed). This header cannot be specified</span>
<span class="sd">            if the source is an Azure File.</span>
<span class="sd">        :param ETag source_if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this conditional</span>
<span class="sd">            header to copy the blob only if its ETag does not match the value</span>
<span class="sd">            specified. If the values are identical, the Blob service returns status</span>
<span class="sd">            code 412 (Precondition Failed). This header cannot be specified if the</span>
<span class="sd">            source is an Azure File.</span>
<span class="sd">        :param datetime destination_if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this conditional header to copy the blob only</span>
<span class="sd">            if the destination blob has been modified since the specified date/time.</span>
<span class="sd">            If the destination blob has not been modified, the Blob service returns</span>
<span class="sd">            status code 412 (Precondition Failed).</span>
<span class="sd">        :param datetime destination_if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this conditional header to copy the blob only</span>
<span class="sd">            if the destination blob has not been modified since the specified</span>
<span class="sd">            date/time. If the destination blob has been modified, the Blob service</span>
<span class="sd">            returns status code 412 (Precondition Failed).</span>
<span class="sd">        :param ETag destination_if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify an ETag value for</span>
<span class="sd">            this conditional header to copy the blob only if the specified ETag value</span>
<span class="sd">            matches the ETag value for an existing destination blob. If the ETag for</span>
<span class="sd">            the destination blob does not match the ETag specified for If-Match, the</span>
<span class="sd">            Blob service returns status code 412 (Precondition Failed).</span>
<span class="sd">        :param ETag destination_if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify an ETag value for</span>
<span class="sd">            this conditional header to copy the blob only if the specified ETag value</span>
<span class="sd">            does not match the ETag value for the destination blob. Specify the wildcard</span>
<span class="sd">            character (*) to perform the operation only if the destination blob does not</span>
<span class="sd">            exist. If the specified condition isn&#39;t met, the Blob service returns status</span>
<span class="sd">            code 412 (Precondition Failed).</span>
<span class="sd">        :param str destination_lease_id:</span>
<span class="sd">            The lease ID specified for this header must match the lease ID of the</span>
<span class="sd">            destination blob. If the request does not include the lease ID or it is not</span>
<span class="sd">            valid, the operation fails with status code 412 (Precondition Failed).</span>
<span class="sd">        :param str source_lease_id:</span>
<span class="sd">            Specify this to perform the Copy Blob operation only if</span>
<span class="sd">            the lease ID given matches the active lease ID of the source blob.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: Copy operation properties such as status, source, and ID.</span>
<span class="sd">        :rtype: :class:`~azure.storage.blob.models.CopyProperties`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copy_blob</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">copy_source</span><span class="p">,</span>
                          <span class="n">metadata</span><span class="p">,</span>
                          <span class="n">source_if_modified_since</span><span class="p">,</span> <span class="n">source_if_unmodified_since</span><span class="p">,</span>
                          <span class="n">source_if_match</span><span class="p">,</span> <span class="n">source_if_none_match</span><span class="p">,</span>
                          <span class="n">destination_if_modified_since</span><span class="p">,</span>
                          <span class="n">destination_if_unmodified_since</span><span class="p">,</span>
                          <span class="n">destination_if_match</span><span class="p">,</span>
                          <span class="n">destination_if_none_match</span><span class="p">,</span>
                          <span class="n">destination_lease_id</span><span class="p">,</span>
                          <span class="n">source_lease_id</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span>
                          <span class="kc">False</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_copy_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">copy_source</span><span class="p">,</span>
                  <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">source_if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">source_if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">source_if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">destination_lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">source_lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">incremental_copy</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        See copy_blob for more details. This helper method</span>
<span class="sd">        allows for standard copies as well as incremental copies which are only supported for page blobs.</span>
<span class="sd">        :param bool incremental_copy:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;copy_source&#39;</span><span class="p">,</span> <span class="n">copy_source</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">copy_source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">):</span>
            <span class="c1"># Backwards compatibility for earlier versions of the SDK where</span>
            <span class="c1"># the copy source can be in the following formats:</span>
            <span class="c1"># - Blob in named container:</span>
            <span class="c1">#     /accountName/containerName/blobName</span>
            <span class="c1"># - Snapshot in named container:</span>
            <span class="c1">#     /accountName/containerName/blobName?snapshot=&lt;DateTime&gt;</span>
            <span class="c1"># - Blob in root container:</span>
            <span class="c1">#     /accountName/blobName</span>
            <span class="c1"># - Snapshot in root container:</span>
            <span class="c1">#     /accountName/blobName?snapshot=&lt;DateTime&gt;</span>
            <span class="n">account</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">source</span> <span class="o">=</span>\
                <span class="n">copy_source</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
            <span class="n">copy_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span> <span class="o">+</span> <span class="s1">&#39;://&#39;</span> <span class="o">+</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">primary_endpoint</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">source</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">incremental_copy</span><span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;incrementalcopy&#39;</span><span class="p">,</span>
                <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">)}</span>

        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-copy-source&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">copy_source</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-source-if-modified-since&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">source_if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-source-if-unmodified-since&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">source_if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-source-if-match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">source_if_match</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-source-if-none-match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">source_if_none_match</span><span class="p">),</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">destination_if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">destination_if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">destination_if_match</span><span class="p">),</span>
            <span class="s1">&#39;If-None-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">destination_if_none_match</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">destination_lease_id</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-source-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">source_lease_id</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_properties</span><span class="p">,</span> <span class="p">[</span><span class="n">BlobProperties</span><span class="p">])</span><span class="o">.</span><span class="n">copy</span>

<div class="viewcode-block" id="BaseBlobService.abort_copy_blob"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.abort_copy_blob">[docs]</a>    <span class="k">def</span> <span class="nf">abort_copy_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">copy_id</span><span class="p">,</span>
                        <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">         Aborts a pending copy_blob operation, and leaves a destination blob</span>
<span class="sd">         with zero length and full metadata.</span>

<span class="sd">         :param str container_name:</span>
<span class="sd">             Name of destination container.</span>
<span class="sd">         :param str blob_name:</span>
<span class="sd">             Name of destination blob.</span>
<span class="sd">         :param str copy_id:</span>
<span class="sd">             Copy identifier provided in the copy.id of the original</span>
<span class="sd">             copy_blob operation.</span>
<span class="sd">         :param str lease_id:</span>
<span class="sd">             Required if the destination blob has an active infinite lease.</span>
<span class="sd">         :param int timeout:</span>
<span class="sd">             The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;copy_id&#39;</span><span class="p">,</span> <span class="n">copy_id</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;copy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;copyid&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">copy_id</span><span class="p">),</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-copy-action&#39;</span><span class="p">:</span> <span class="s1">&#39;abort&#39;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBlobService.delete_blob"><a class="viewcode-back" href="../../../../ref/azure.storage.blob.baseblobservice.html#azure.storage.blob.baseblobservice.BaseBlobService.delete_blob">[docs]</a>    <span class="k">def</span> <span class="nf">delete_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">lease_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">delete_snapshots</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">if_modified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">if_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">if_none_match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Marks the specified blob or snapshot for deletion.</span>
<span class="sd">        The blob is later deleted during garbage collection.</span>

<span class="sd">        Note that in order to delete a blob, you must delete all of its</span>
<span class="sd">        snapshots. You can delete both at the same time with the Delete</span>
<span class="sd">        Blob operation.</span>

<span class="sd">        :param str container_name:</span>
<span class="sd">            Name of existing container.</span>
<span class="sd">        :param str blob_name:</span>
<span class="sd">            Name of existing blob.</span>
<span class="sd">        :param str snapshot:</span>
<span class="sd">            The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to delete.</span>
<span class="sd">        :param str lease_id:</span>
<span class="sd">            Required if the blob has an active lease.</span>
<span class="sd">        :param delete_snapshots:</span>
<span class="sd">            Required if the blob has associated snapshots.</span>
<span class="sd">        :type delete_snapshots: </span>
<span class="sd">            One of the values listed in the :class:`~azure.storage.blob.models.DeleteSnapshot` enum.</span>
<span class="sd">        :param datetime if_modified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC. </span>
<span class="sd">            Specify this header to perform the operation only</span>
<span class="sd">            if the resource has been modified since the specified time.</span>
<span class="sd">        :param datetime if_unmodified_since:</span>
<span class="sd">            A DateTime value. Azure expects the date value passed in to be UTC.</span>
<span class="sd">            If timezone is included, any non-UTC datetimes will be converted to UTC.</span>
<span class="sd">            If a date is passed in without timezone info, it is assumed to be UTC.</span>
<span class="sd">            Specify this header to perform the operation only if</span>
<span class="sd">            the resource has not been modified since the specified date/time.</span>
<span class="sd">        :param str if_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header to perform</span>
<span class="sd">            the operation only if the resource&#39;s ETag matches the value specified.</span>
<span class="sd">        :param str if_none_match:</span>
<span class="sd">            An ETag value, or the wildcard character (*). Specify this header</span>
<span class="sd">            to perform the operation only if the resource&#39;s ETag does not match</span>
<span class="sd">            the value specified. Specify the wildcard character (*) to perform</span>
<span class="sd">            the operation only if the resource does not exist, and fail the</span>
<span class="sd">            operation if it does exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;DELETE&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-lease-id&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">lease_id</span><span class="p">),</span>
            <span class="s1">&#39;x-ms-delete-snapshots&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">delete_snapshots</span><span class="p">),</span>
            <span class="s1">&#39;If-Modified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Unmodified-Since&#39;</span><span class="p">:</span> <span class="n">_datetime_to_utc_string</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">),</span>
            <span class="s1">&#39;If-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_match</span><span class="p">),</span>
            <span class="s1">&#39;If-None-Match&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;snapshot&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">snapshot</span><span class="p">),</span>
            <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Microsoft.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>