<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>azure.storage.file.fileservice &#8212; Azure Storage SDK for Python 0.34.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '0.34.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for azure.storage.file.fileservice</h1><div class="highlight"><pre>
<span></span><span class="c1">#-------------------------------------------------------------------------</span>
<span class="c1"># Copyright (c) Microsoft.  All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#   http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="c1">#--------------------------------------------------------------------------</span>
<span class="kn">from</span> <span class="nn">azure.common</span> <span class="k">import</span> <span class="n">AzureHttpError</span>
<span class="kn">from</span> <span class="nn">.._error</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_dont_fail_not_exist</span><span class="p">,</span>
    <span class="n">_dont_fail_on_exist</span><span class="p">,</span>
    <span class="n">_validate_not_none</span><span class="p">,</span>
    <span class="n">_validate_type_bytes</span><span class="p">,</span>
    <span class="n">_ERROR_VALUE_NEGATIVE</span><span class="p">,</span>
    <span class="n">_ERROR_STORAGE_MISSING_INFO</span><span class="p">,</span>
    <span class="n">_ERROR_EMULATOR_DOES_NOT_SUPPORT_FILES</span><span class="p">,</span>
    <span class="n">_ERROR_PARALLEL_NOT_SEEKABLE</span><span class="p">,</span>
    <span class="n">_validate_access_policies</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._common_conversion</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_int_to_str</span><span class="p">,</span>
    <span class="n">_to_str</span><span class="p">,</span>
    <span class="n">_get_content_md5</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._serialization</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_get_request_body</span><span class="p">,</span>
    <span class="n">_get_data_bytes_only</span><span class="p">,</span>
    <span class="n">_convert_signed_identifiers_to_xml</span><span class="p">,</span>
    <span class="n">_convert_service_properties_to_xml</span><span class="p">,</span>
    <span class="n">_add_metadata_headers</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._deserialization</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_convert_xml_to_service_properties</span><span class="p">,</span>
    <span class="n">_convert_xml_to_signed_identifiers</span><span class="p">,</span>
    <span class="n">_get_download_size</span><span class="p">,</span>
    <span class="n">_parse_metadata</span><span class="p">,</span>
    <span class="n">_parse_properties</span><span class="p">,</span>
    <span class="n">_parse_length_from_content_range</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">..models</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">Services</span><span class="p">,</span>
    <span class="n">ListGenerator</span><span class="p">,</span>
    <span class="n">_OperationContext</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">File</span><span class="p">,</span>
    <span class="n">FileProperties</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._http</span> <span class="k">import</span> <span class="n">HTTPRequest</span>
<span class="kn">from</span> <span class="nn">._upload_chunking</span> <span class="k">import</span> <span class="n">_upload_file_chunks</span>
<span class="kn">from</span> <span class="nn">._download_chunking</span> <span class="k">import</span> <span class="n">_download_file_chunks</span>
<span class="kn">from</span> <span class="nn">.._auth</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_StorageSharedKeyAuthentication</span><span class="p">,</span>
    <span class="n">_StorageSASAuthentication</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.._connection</span> <span class="k">import</span> <span class="n">_ServiceParameters</span>
<span class="kn">from</span> <span class="nn">.._constants</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">SERVICE_HOST_BASE</span><span class="p">,</span>
    <span class="n">DEFAULT_PROTOCOL</span><span class="p">,</span>
    <span class="n">DEV_ACCOUNT_NAME</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">._serialization</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_get_path</span><span class="p">,</span>
    <span class="n">_validate_and_format_range_headers</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">._deserialization</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">_convert_xml_to_shares</span><span class="p">,</span>
    <span class="n">_convert_xml_to_directories_and_files</span><span class="p">,</span>
    <span class="n">_convert_xml_to_ranges</span><span class="p">,</span>
    <span class="n">_convert_xml_to_share_stats</span><span class="p">,</span>
    <span class="n">_parse_file</span><span class="p">,</span>
    <span class="n">_parse_share</span><span class="p">,</span>
    <span class="n">_parse_directory</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">..sharedaccesssignature</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">SharedAccessSignature</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">..storageclient</span> <span class="k">import</span> <span class="n">StorageClient</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="k">import</span> <span class="n">path</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,):</span>
    <span class="kn">from</span> <span class="nn">io</span> <span class="k">import</span> <span class="n">BytesIO</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">cStringIO</span> <span class="k">import</span> <span class="n">StringIO</span> <span class="k">as</span> <span class="n">BytesIO</span>

<div class="viewcode-block" id="FileService"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService">[docs]</a><span class="k">class</span> <span class="nc">FileService</span><span class="p">(</span><span class="n">StorageClient</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    The Server Message Block (SMB) protocol is the preferred file share protocol</span>
<span class="sd">    used on premise today. The Microsoft Azure File service enables customers to</span>
<span class="sd">    leverage the availability and scalability of Azureâ€™s Cloud Infrastructure as</span>
<span class="sd">    a Service (IaaS) SMB without having to rewrite SMB client applications.</span>

<span class="sd">    The Azure File service also offers a compelling alternative to traditional</span>
<span class="sd">    Direct Attached Storage (DAS) and Storage Area Network (SAN) solutions, which</span>
<span class="sd">    are often complex and expensive to install, configure, and operate. </span>

<span class="sd">    :ivar int MAX_SINGLE_GET_SIZE: </span>
<span class="sd">        The size of the first range get performed by get_file_to_* methods if </span>
<span class="sd">        max_connections is greater than 1. Less data will be returned if the </span>
<span class="sd">        file is smaller than this.</span>
<span class="sd">    :ivar int MAX_CHUNK_GET_SIZE: </span>
<span class="sd">        The size of subsequent range gets performed by get_file_to_* methods if </span>
<span class="sd">        max_connections is greater than 1 and the file is larger than MAX_SINGLE_GET_SIZE. </span>
<span class="sd">        Less data will be returned if the remainder of the file is smaller than </span>
<span class="sd">        this. If this is set to larger than 4MB, content_validation will throw an </span>
<span class="sd">        error if enabled. However, if content_validation is not desired a size </span>
<span class="sd">        greater than 4MB may be optimal. Setting this below 4MB is not recommended.</span>
<span class="sd">    :ivar int MAX_RANGE_SIZE: </span>
<span class="sd">        The size of the ranges put by create_file_from_* methods. Smaller ranges </span>
<span class="sd">        may be put if there is less data provided. The maximum range size the service </span>
<span class="sd">        supports is 4MB.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">MAX_SINGLE_GET_SIZE</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
    <span class="n">MAX_CHUNK_GET_SIZE</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
    <span class="n">MAX_RANGE_SIZE</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">account_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sas_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                 <span class="n">protocol</span><span class="o">=</span><span class="n">DEFAULT_PROTOCOL</span><span class="p">,</span> <span class="n">endpoint_suffix</span><span class="o">=</span><span class="n">SERVICE_HOST_BASE</span><span class="p">,</span> 
                 <span class="n">request_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">connection_string</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        :param str account_name:</span>
<span class="sd">            The storage account name. This is used to authenticate requests </span>
<span class="sd">            signed with an account key and to construct the storage endpoint. It </span>
<span class="sd">            is required unless a connection string is given.</span>
<span class="sd">        :param str account_key:</span>
<span class="sd">            The storage account key. This is used for shared key authentication. </span>
<span class="sd">        :param str sas_token:</span>
<span class="sd">             A shared access signature token to use to authenticate requests </span>
<span class="sd">             instead of the account key. If account key and sas token are both </span>
<span class="sd">             specified, account key will be used to sign.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            The protocol to use for requests. Defaults to https.</span>
<span class="sd">        :param str endpoint_suffix:</span>
<span class="sd">            The host base component of the url, minus the account name. Defaults </span>
<span class="sd">            to Azure (core.windows.net). Override this to use the China cloud </span>
<span class="sd">            (core.chinacloudapi.cn).</span>
<span class="sd">        :param requests.Session request_session:</span>
<span class="sd">            The session object to use for http requests.</span>
<span class="sd">        :param str connection_string:</span>
<span class="sd">            If specified, this will override all other parameters besides </span>
<span class="sd">            request session. See</span>
<span class="sd">            http://azure.microsoft.com/en-us/documentation/articles/storage-configure-connection-string/</span>
<span class="sd">            for the connection string format.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">service_params</span> <span class="o">=</span> <span class="n">_ServiceParameters</span><span class="o">.</span><span class="n">get_service_parameters</span><span class="p">(</span>
            <span class="s1">&#39;file&#39;</span><span class="p">,</span>
            <span class="n">account_name</span><span class="o">=</span><span class="n">account_name</span><span class="p">,</span> 
            <span class="n">account_key</span><span class="o">=</span><span class="n">account_key</span><span class="p">,</span> 
            <span class="n">sas_token</span><span class="o">=</span><span class="n">sas_token</span><span class="p">,</span> 
            <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">,</span> 
            <span class="n">endpoint_suffix</span><span class="o">=</span><span class="n">endpoint_suffix</span><span class="p">,</span>
            <span class="n">request_session</span><span class="o">=</span><span class="n">request_session</span><span class="p">,</span>
            <span class="n">connection_string</span><span class="o">=</span><span class="n">connection_string</span><span class="p">)</span>
            
        <span class="nb">super</span><span class="p">(</span><span class="n">FileService</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">service_params</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span> <span class="o">==</span> <span class="n">DEV_ACCOUNT_NAME</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_EMULATOR_DOES_NOT_SUPPORT_FILES</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authentication</span> <span class="o">=</span> <span class="n">_StorageSharedKeyAuthentication</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">sas_token</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authentication</span> <span class="o">=</span> <span class="n">_StorageSASAuthentication</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sas_token</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_STORAGE_MISSING_INFO</span><span class="p">)</span>

<div class="viewcode-block" id="FileService.make_file_url"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.make_file_url">[docs]</a>    <span class="k">def</span> <span class="nf">make_file_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> 
                      <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sas_token</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates the url to access a file.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of file.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            Protocol to use: &#39;http&#39; or &#39;https&#39;. If not specified, uses the</span>
<span class="sd">            protocol specified when FileService was initialized.</span>
<span class="sd">        :param str sas_token:</span>
<span class="sd">            Shared access signature token created with</span>
<span class="sd">            generate_shared_access_signature.</span>
<span class="sd">        :return: file access URL.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="n">directory_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">://</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">protocol</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">primary_endpoint</span><span class="p">,</span>
                <span class="n">share_name</span><span class="p">,</span>
                <span class="n">file_name</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">://</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">protocol</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">primary_endpoint</span><span class="p">,</span>
                <span class="n">share_name</span><span class="p">,</span>
                <span class="n">directory_name</span><span class="p">,</span>
                <span class="n">file_name</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">sas_token</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">+=</span> <span class="s1">&#39;?&#39;</span> <span class="o">+</span> <span class="n">sas_token</span>

        <span class="k">return</span> <span class="n">url</span></div>

<div class="viewcode-block" id="FileService.generate_account_shared_access_signature"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.generate_account_shared_access_signature">[docs]</a>    <span class="k">def</span> <span class="nf">generate_account_shared_access_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource_types</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> 
                                        <span class="n">expiry</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Generates a shared access signature for the file service.</span>
<span class="sd">        Use the returned signature with the sas_token parameter of the FileService.</span>

<span class="sd">        :param ResourceTypes resource_types:</span>
<span class="sd">            Specifies the resource types that are accessible with the account SAS.</span>
<span class="sd">        :param AccountPermissions permission:</span>
<span class="sd">            The permissions associated with the shared access signature. The </span>
<span class="sd">            user is restricted to operations allowed by the permissions. </span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has been </span>
<span class="sd">            specified in an associated stored access policy.</span>
<span class="sd">        :param expiry:</span>
<span class="sd">            The time at which the shared access signature becomes invalid. </span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has </span>
<span class="sd">            been specified in an associated stored access policy. Azure will always </span>
<span class="sd">            convert values to UTC. If a date is passed in without timezone info, it </span>
<span class="sd">            is assumed to be UTC.</span>
<span class="sd">        :type expiry: date or str</span>
<span class="sd">        :param start:</span>
<span class="sd">            The time at which the shared access signature becomes valid. If </span>
<span class="sd">            omitted, start time for this call is assumed to be the time when the </span>
<span class="sd">            storage service receives the request. Azure will always convert values </span>
<span class="sd">            to UTC. If a date is passed in without timezone info, it is assumed to </span>
<span class="sd">            be UTC.</span>
<span class="sd">        :type start: date or str</span>
<span class="sd">        :param str ip:</span>
<span class="sd">            Specifies an IP address or a range of IP addresses from which to accept requests.</span>
<span class="sd">            If the IP address from which the request originates does not match the IP address</span>
<span class="sd">            or address range specified on the SAS token, the request is not authenticated.</span>
<span class="sd">            For example, specifying sip=168.1.5.65 or sip=168.1.5.60-168.1.5.70 on the SAS</span>
<span class="sd">            restricts the request to those IP addresses.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            Specifies the protocol permitted for a request made. Possible values are</span>
<span class="sd">            both HTTPS and HTTP (https,http) or HTTPS only (https). The default value</span>
<span class="sd">            is https,http. Note that HTTP only is not a permitted value.</span>
<span class="sd">        :return: A Shared Access Signature (sas) token.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_name&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_key&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>

        <span class="n">sas</span> <span class="o">=</span> <span class="n">SharedAccessSignature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sas</span><span class="o">.</span><span class="n">generate_account</span><span class="p">(</span><span class="n">Services</span><span class="o">.</span><span class="n">FILE</span><span class="p">,</span> <span class="n">resource_types</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> 
                                    <span class="n">expiry</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="n">ip</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.generate_share_shared_access_signature"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.generate_share_shared_access_signature">[docs]</a>    <span class="k">def</span> <span class="nf">generate_share_shared_access_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> 
                                         <span class="n">permission</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                                         <span class="n">expiry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                                         <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">ip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">cache_control</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">content_disposition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">content_encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">content_language</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">content_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Generates a shared access signature for the share.</span>
<span class="sd">        Use the returned signature with the sas_token parameter of FileService.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of share.</span>
<span class="sd">        :param SharePermissions permission:</span>
<span class="sd">            The permissions associated with the shared access signature. The </span>
<span class="sd">            user is restricted to operations allowed by the permissions.</span>
<span class="sd">            Permissions must be ordered read, create, write, delete, list.</span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has been </span>
<span class="sd">            specified in an associated stored access policy.</span>
<span class="sd">        :param expiry:</span>
<span class="sd">            The time at which the shared access signature becomes invalid. </span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has </span>
<span class="sd">            been specified in an associated stored access policy. Azure will always </span>
<span class="sd">            convert values to UTC. If a date is passed in without timezone info, it </span>
<span class="sd">            is assumed to be UTC.</span>
<span class="sd">        :type expiry: date or str</span>
<span class="sd">        :param start:</span>
<span class="sd">            The time at which the shared access signature becomes valid. If </span>
<span class="sd">            omitted, start time for this call is assumed to be the time when the </span>
<span class="sd">            storage service receives the request. Azure will always convert values </span>
<span class="sd">            to UTC. If a date is passed in without timezone info, it is assumed to </span>
<span class="sd">            be UTC.</span>
<span class="sd">        :type start: date or str</span>
<span class="sd">        :param str id:</span>
<span class="sd">            A unique value up to 64 characters in length that correlates to a </span>
<span class="sd">            stored access policy. To create a stored access policy, use :func:`~set_share_acl`.</span>
<span class="sd">        :param str ip:</span>
<span class="sd">            Specifies an IP address or a range of IP addresses from which to accept requests.</span>
<span class="sd">            If the IP address from which the request originates does not match the IP address</span>
<span class="sd">            or address range specified on the SAS token, the request is not authenticated.</span>
<span class="sd">            For example, specifying sip=168.1.5.65 or sip=168.1.5.60-168.1.5.70 on the SAS</span>
<span class="sd">            restricts the request to those IP addresses.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            Specifies the protocol permitted for a request made. Possible values are</span>
<span class="sd">            both HTTPS and HTTP (https,http) or HTTPS only (https). The default value</span>
<span class="sd">            is https,http. Note that HTTP only is not a permitted value.</span>
<span class="sd">        :param str cache_control:</span>
<span class="sd">            Response header value for Cache-Control when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_disposition:</span>
<span class="sd">            Response header value for Content-Disposition when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_encoding:</span>
<span class="sd">            Response header value for Content-Encoding when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_language:</span>
<span class="sd">            Response header value for Content-Language when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_type:</span>
<span class="sd">            Response header value for Content-Type when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :return: A Shared Access Signature (sas) token.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_name&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_key&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>

        <span class="n">sas</span> <span class="o">=</span> <span class="n">SharedAccessSignature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sas</span><span class="o">.</span><span class="n">generate_share</span><span class="p">(</span>
            <span class="n">share_name</span><span class="p">,</span>
            <span class="n">permission</span><span class="p">,</span> 
            <span class="n">expiry</span><span class="p">,</span>
            <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> 
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">ip</span><span class="o">=</span><span class="n">ip</span><span class="p">,</span>
            <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">,</span>
            <span class="n">cache_control</span><span class="o">=</span><span class="n">cache_control</span><span class="p">,</span>
            <span class="n">content_disposition</span><span class="o">=</span><span class="n">content_disposition</span><span class="p">,</span>
            <span class="n">content_encoding</span><span class="o">=</span><span class="n">content_encoding</span><span class="p">,</span>
            <span class="n">content_language</span><span class="o">=</span><span class="n">content_language</span><span class="p">,</span>
            <span class="n">content_type</span><span class="o">=</span><span class="n">content_type</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FileService.generate_file_shared_access_signature"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.generate_file_shared_access_signature">[docs]</a>    <span class="k">def</span> <span class="nf">generate_file_shared_access_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> 
                                         <span class="n">directory_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                                         <span class="n">file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">permission</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                                         <span class="n">expiry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                                         <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">ip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">cache_control</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">content_disposition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">content_encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">content_language</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">content_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Generates a shared access signature for the file.</span>
<span class="sd">        Use the returned signature with the sas_token parameter of FileService.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            Name of directory. SAS tokens cannot be created for directories, so </span>
<span class="sd">            this parameter should only be present if file_name is provided.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of file.</span>
<span class="sd">        :param FilePermissions permission:</span>
<span class="sd">            The permissions associated with the shared access signature. The </span>
<span class="sd">            user is restricted to operations allowed by the permissions.</span>
<span class="sd">            Permissions must be ordered read, create, write, delete, list.</span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has been </span>
<span class="sd">            specified in an associated stored access policy.</span>
<span class="sd">        :param expiry:</span>
<span class="sd">            The time at which the shared access signature becomes invalid. </span>
<span class="sd">            Required unless an id is given referencing a stored access policy </span>
<span class="sd">            which contains this field. This field must be omitted if it has </span>
<span class="sd">            been specified in an associated stored access policy. Azure will always </span>
<span class="sd">            convert values to UTC. If a date is passed in without timezone info, it </span>
<span class="sd">            is assumed to be UTC.</span>
<span class="sd">        :type expiry: date or str</span>
<span class="sd">        :param start:</span>
<span class="sd">            The time at which the shared access signature becomes valid. If </span>
<span class="sd">            omitted, start time for this call is assumed to be the time when the </span>
<span class="sd">            storage service receives the request. Azure will always convert values </span>
<span class="sd">            to UTC. If a date is passed in without timezone info, it is assumed to </span>
<span class="sd">            be UTC.</span>
<span class="sd">        :type start: date or str</span>
<span class="sd">        :param str id:</span>
<span class="sd">            A unique value up to 64 characters in length that correlates to a </span>
<span class="sd">            stored access policy. To create a stored access policy, use </span>
<span class="sd">            set_file_service_properties.</span>
<span class="sd">        :param str ip:</span>
<span class="sd">            Specifies an IP address or a range of IP addresses from which to accept requests.</span>
<span class="sd">            If the IP address from which the request originates does not match the IP address</span>
<span class="sd">            or address range specified on the SAS token, the request is not authenticated.</span>
<span class="sd">            For example, specifying sip=168.1.5.65 or sip=168.1.5.60-168.1.5.70 on the SAS</span>
<span class="sd">            restricts the request to those IP addresses.</span>
<span class="sd">        :param str protocol:</span>
<span class="sd">            Specifies the protocol permitted for a request made. Possible values are</span>
<span class="sd">            both HTTPS and HTTP (https,http) or HTTPS only (https). The default value</span>
<span class="sd">            is https,http. Note that HTTP only is not a permitted value.</span>
<span class="sd">        :param str cache_control:</span>
<span class="sd">            Response header value for Cache-Control when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_disposition:</span>
<span class="sd">            Response header value for Content-Disposition when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_encoding:</span>
<span class="sd">            Response header value for Content-Encoding when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_language:</span>
<span class="sd">            Response header value for Content-Language when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :param str content_type:</span>
<span class="sd">            Response header value for Content-Type when resource is accessed</span>
<span class="sd">            using this shared access signature.</span>
<span class="sd">        :return: A Shared Access Signature (sas) token.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_name&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;self.account_key&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>

        <span class="n">sas</span> <span class="o">=</span> <span class="n">SharedAccessSignature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sas</span><span class="o">.</span><span class="n">generate_file</span><span class="p">(</span>
            <span class="n">share_name</span><span class="p">,</span>
            <span class="n">directory_name</span><span class="p">,</span>
            <span class="n">file_name</span><span class="p">,</span>
            <span class="n">permission</span><span class="p">,</span> 
            <span class="n">expiry</span><span class="p">,</span>
            <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> 
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">ip</span><span class="o">=</span><span class="n">ip</span><span class="p">,</span>
            <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">,</span>
            <span class="n">cache_control</span><span class="o">=</span><span class="n">cache_control</span><span class="p">,</span>
            <span class="n">content_disposition</span><span class="o">=</span><span class="n">content_disposition</span><span class="p">,</span>
            <span class="n">content_encoding</span><span class="o">=</span><span class="n">content_encoding</span><span class="p">,</span>
            <span class="n">content_language</span><span class="o">=</span><span class="n">content_language</span><span class="p">,</span>
            <span class="n">content_type</span><span class="o">=</span><span class="n">content_type</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FileService.set_file_service_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.set_file_service_properties">[docs]</a>    <span class="k">def</span> <span class="nf">set_file_service_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hour_metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minute_metrics</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                                    <span class="n">cors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the properties of a storage account&#39;s File service, including</span>
<span class="sd">        Azure Storage Analytics. If an element (ex HourMetrics) is left as None, the </span>
<span class="sd">        existing settings on the service for that functionality are preserved.</span>

<span class="sd">        :param Metrics hour_metrics:</span>
<span class="sd">            The hour metrics settings provide a summary of request </span>
<span class="sd">            statistics grouped by API in hourly aggregates for files.</span>
<span class="sd">        :param Metrics minute_metrics:</span>
<span class="sd">            The minute metrics settings provide request statistics </span>
<span class="sd">            for each minute for files.</span>
<span class="sd">        :param cors:</span>
<span class="sd">            You can include up to five CorsRule elements in the </span>
<span class="sd">            list. If an empty list is specified, all CORS rules will be deleted, </span>
<span class="sd">            and CORS will be disabled for the service.</span>
<span class="sd">        :type cors: list of :class:`~azure.storage.models.CorsRule`</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;service&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;properties&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>         
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body</span><span class="p">(</span>
            <span class="n">_convert_service_properties_to_xml</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">hour_metrics</span><span class="p">,</span> <span class="n">minute_metrics</span><span class="p">,</span> <span class="n">cors</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.get_file_service_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_file_service_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_service_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the properties of a storage account&#39;s File service, including</span>
<span class="sd">        Azure Storage Analytics.</span>

<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: The file service properties.</span>
<span class="sd">        :rtype:</span>
<span class="sd">            :class:`~azure.storage.models.ServiceProperties`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;service&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;properties&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>         
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_service_properties</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.list_shares"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.list_shares">[docs]</a>    <span class="k">def</span> <span class="nf">list_shares</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">num_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                    <span class="n">include_metadata</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a generator to list the shares under the specified account.</span>
<span class="sd">        The generator will lazily follow the continuation tokens returned by</span>
<span class="sd">        the service and stop when all shares have been returned or num_results </span>
<span class="sd">        is reached.</span>

<span class="sd">        If num_results is specified and the account has more than that number of </span>
<span class="sd">        shares, the generator will have a populated next_marker field once it </span>
<span class="sd">        finishes. This marker can be used to create a new generator if more </span>
<span class="sd">        results are desired.</span>

<span class="sd">        :param str prefix:</span>
<span class="sd">            Filters the results to return only shares whose names</span>
<span class="sd">            begin with the specified prefix.</span>
<span class="sd">        :param int num_results:</span>
<span class="sd">            Specifies the maximum number of shares to return.</span>
<span class="sd">        :param bool include_metadata:</span>
<span class="sd">            Specifies that share metadata be returned in the response.</span>
<span class="sd">        :param str marker:</span>
<span class="sd">            An opaque continuation token. This value can be retrieved from the </span>
<span class="sd">            next_marker field of a previous generator object if num_results was </span>
<span class="sd">            specified and that generator has finished enumerating results. If </span>
<span class="sd">            specified, this generator will begin returning results from the point </span>
<span class="sd">            where the previous generator stopped.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">include</span> <span class="o">=</span> <span class="s1">&#39;metadata&#39;</span> <span class="k">if</span> <span class="n">include_metadata</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">operation_context</span> <span class="o">=</span> <span class="n">_OperationContext</span><span class="p">(</span><span class="n">location_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="n">prefix</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">marker</span><span class="p">,</span> <span class="s1">&#39;max_results&#39;</span><span class="p">:</span> <span class="n">num_results</span><span class="p">,</span> 
                <span class="s1">&#39;include&#39;</span><span class="p">:</span> <span class="n">include</span><span class="p">,</span> <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">timeout</span><span class="p">,</span> <span class="s1">&#39;_context&#39;</span><span class="p">:</span> <span class="n">operation_context</span><span class="p">}</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_shares</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ListGenerator</span><span class="p">(</span><span class="n">resp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_shares</span><span class="p">,</span> <span class="p">(),</span> <span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_list_shares</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                     <span class="n">include</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of the shares under the specified account.</span>

<span class="sd">        :param str prefix:</span>
<span class="sd">            Filters the results to return only shares whose names</span>
<span class="sd">            begin with the specified prefix.</span>
<span class="sd">        :param str marker:</span>
<span class="sd">            A string value that identifies the portion of the list</span>
<span class="sd">            to be returned with the next list operation. The operation returns</span>
<span class="sd">            a next_marker value within the response body if the list returned was</span>
<span class="sd">            not complete. The marker value may then be used in a subsequent</span>
<span class="sd">            call to request the next set of list items. The marker value is</span>
<span class="sd">            opaque to the client.</span>
<span class="sd">        :param int max_results:</span>
<span class="sd">            Specifies the maximum number of shares to return. A single list</span>
<span class="sd">            request may return up to 1000 shares and potentially a continuation</span>
<span class="sd">            token which should be followed to get additional resutls.</span>
<span class="sd">        :param string include:</span>
<span class="sd">            Include this parameter to specify that the share&#39;s</span>
<span class="sd">            metadata be returned as part of the response body. set this</span>
<span class="sd">            parameter to string &#39;metadata&#39; to get share&#39;s metadata.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span>
             <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">prefix</span><span class="p">),</span>
             <span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">marker</span><span class="p">),</span>
             <span class="s1">&#39;maxresults&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">max_results</span><span class="p">),</span>
             <span class="s1">&#39;include&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">include</span><span class="p">),</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_shares</span><span class="p">,</span> <span class="n">operation_context</span><span class="o">=</span><span class="n">_context</span><span class="p">)</span>

<div class="viewcode-block" id="FileService.create_share"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.create_share">[docs]</a>    <span class="k">def</span> <span class="nf">create_share</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quota</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">fail_on_exist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new share under the specified account. If the share</span>
<span class="sd">        with the same name already exists, the operation fails on the</span>
<span class="sd">        service. By default, the exception is swallowed by the client.</span>
<span class="sd">        To expose the exception, specify True for fail_on_exists.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of share to create.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            A dict with name_value pairs to associate with the</span>
<span class="sd">            share as metadata. Example:{&#39;Category&#39;:&#39;test&#39;}</span>
<span class="sd">        :type metadata: a dict of str to str:</span>
<span class="sd">        :param int quota:</span>
<span class="sd">            Specifies the maximum size of the share, in gigabytes. Must be </span>
<span class="sd">            greater than 0, and less than or equal to 5TB (5120).</span>
<span class="sd">        :param bool fail_on_exist:</span>
<span class="sd">            Specify whether to throw an exception when the share exists.</span>
<span class="sd">            False by default.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: True if share is created, False if share already exists.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;share&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;x-ms-share-quota&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">quota</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">fail_on_exist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">_dont_fail_on_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="FileService.get_share_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_share_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_share_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata and system properties for the</span>
<span class="sd">        specified share. The data returned does not include the shares&#39;s</span>
<span class="sd">        list of files or directories.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: A Share that exposes properties and metadata.</span>
<span class="sd">        :rtype: :class:`.Share`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;share&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_share</span><span class="p">,</span> <span class="p">[</span><span class="n">share_name</span><span class="p">])</span></div>

<div class="viewcode-block" id="FileService.set_share_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.set_share_properties">[docs]</a>    <span class="k">def</span> <span class="nf">set_share_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">quota</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets service-defined properties for the specified share.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param int quota:</span>
<span class="sd">            Specifies the maximum size of the share, in gigabytes. Must be </span>
<span class="sd">            greater than 0, and less than or equal to 5 TB (5120 GB).</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;quota&#39;</span><span class="p">,</span> <span class="n">quota</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;share&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;properties&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span> 
            <span class="s1">&#39;x-ms-share-quota&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">quota</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.get_share_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_share_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_share_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata for the specified share.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return:</span>
<span class="sd">            A dictionary representing the share metadata name, value pairs.</span>
<span class="sd">        :rtype: a dict mapping str to str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;share&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.set_share_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.set_share_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">set_share_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets one or more user-defined name-value pairs for the specified</span>
<span class="sd">        share. Each call to this operation replaces all existing metadata</span>
<span class="sd">        attached to the share. To remove all metadata from the share,</span>
<span class="sd">        call this operation with no metadata dict.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            A dict containing name-value pairs to associate with the share as </span>
<span class="sd">            metadata. Example: {&#39;category&#39;:&#39;test&#39;}</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;share&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.get_share_acl"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_share_acl">[docs]</a>    <span class="k">def</span> <span class="nf">get_share_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the permissions for the specified share.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: A dictionary of access policies associated with the share.</span>
<span class="sd">        :rtype: dict of str to :class:`.AccessPolicy`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;share&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;acl&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_signed_identifiers</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.set_share_acl"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.set_share_acl">[docs]</a>    <span class="k">def</span> <span class="nf">set_share_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">signed_identifiers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the permissions for the specified share or stored access </span>
<span class="sd">        policies that may be used with Shared Access Signatures.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param signed_identifiers:</span>
<span class="sd">            A dictionary of access policies to associate with the share. The </span>
<span class="sd">            dictionary may contain up to 5 elements. An empty dictionary </span>
<span class="sd">            will clear the access policies set on the service. </span>
<span class="sd">        :type signed_identifiers: dict of str to :class:`.AccessPolicy`</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_access_policies</span><span class="p">(</span><span class="n">signed_identifiers</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;share&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;acl&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body</span><span class="p">(</span>
            <span class="n">_convert_signed_identifiers_to_xml</span><span class="p">(</span><span class="n">signed_identifiers</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.get_share_stats"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_share_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_share_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the approximate size of the data stored on the share,</span>
<span class="sd">        rounded up to the nearest gigabyte.</span>
<span class="sd">        </span>
<span class="sd">        Note that this value may not include all recently created</span>
<span class="sd">        or recently resized files.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: the approximate size of the data stored on the share.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;share&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;stats&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_share_stats</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.delete_share"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.delete_share">[docs]</a>    <span class="k">def</span> <span class="nf">delete_share</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">fail_not_exist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Marks the specified share for deletion. If the share</span>
<span class="sd">        does not exist, the operation fails on the service. By </span>
<span class="sd">        default, the exception is swallowed by the client.</span>
<span class="sd">        To expose the exception, specify True for fail_not_exist.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of share to delete.</span>
<span class="sd">        :param bool fail_not_exist:</span>
<span class="sd">            Specify whether to throw an exception when the share doesn&#39;t</span>
<span class="sd">            exist. False by default.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: True if share is deleted, False share doesn&#39;t exist.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;DELETE&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;share&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">fail_not_exist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">_dont_fail_not_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="FileService.create_directory"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.create_directory">[docs]</a>    <span class="k">def</span> <span class="nf">create_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">fail_on_exist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new directory under the specified share or parent directory. </span>
<span class="sd">        If the directory with the same name already exists, the operation fails</span>
<span class="sd">        on the service. By default, the exception is swallowed by the client.</span>
<span class="sd">        To expose the exception, specify True for fail_on_exists.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            Name of directory to create, including the path to the parent </span>
<span class="sd">            directory.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            A dict with name_value pairs to associate with the</span>
<span class="sd">            share as metadata. Example:{&#39;Category&#39;:&#39;test&#39;}</span>
<span class="sd">        :type metadata: dict of str to str:</span>
<span class="sd">        :param bool fail_on_exist:</span>
<span class="sd">            specify whether to throw an exception when the directory exists.</span>
<span class="sd">            False by default.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: True if directory is created, False if directory already exists.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;directory_name&#39;</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;directory&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">fail_on_exist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">_dont_fail_on_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="FileService.delete_directory"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.delete_directory">[docs]</a>    <span class="k">def</span> <span class="nf">delete_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span>
                         <span class="n">fail_not_exist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Deletes the specified empty directory. Note that the directory must</span>
<span class="sd">        be empty before it can be deleted. Attempting to delete directories </span>
<span class="sd">        that are not empty will fail.</span>

<span class="sd">        If the directory does not exist, the operation fails on the</span>
<span class="sd">        service. By default, the exception is swallowed by the client.</span>
<span class="sd">        To expose the exception, specify True for fail_not_exist.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            Name of directory to delete, including the path to the parent </span>
<span class="sd">            directory.</span>
<span class="sd">        :param bool fail_not_exist:</span>
<span class="sd">            Specify whether to throw an exception when the directory doesn&#39;t</span>
<span class="sd">            exist.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: True if directory is deleted, False otherwise.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;directory_name&#39;</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;DELETE&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;directory&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">fail_not_exist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">_dont_fail_not_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="FileService.get_directory_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_directory_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_directory_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata and system properties for the</span>
<span class="sd">        specified directory. The data returned does not include the directory&#39;s</span>
<span class="sd">        list of files.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">           The path to an existing directory.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: properties for the specified directory within a directory object.</span>
<span class="sd">        :rtype: :class:`~azure.storage.file.models.Directory`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;directory_name&#39;</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;directory&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_directory</span><span class="p">,</span> <span class="p">[</span><span class="n">directory_name</span><span class="p">])</span></div>

<div class="viewcode-block" id="FileService.get_directory_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_directory_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_directory_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata for the specified directory.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return:</span>
<span class="sd">            A dictionary representing the directory metadata name, value pairs.</span>
<span class="sd">        :rtype: a dict mapping str to str</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;directory_name&#39;</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;directory&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.set_directory_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.set_directory_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">set_directory_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets one or more user-defined name-value pairs for the specified</span>
<span class="sd">        directory. Each call to this operation replaces all existing metadata</span>
<span class="sd">        attached to the directory. To remove all metadata from the directory,</span>
<span class="sd">        call this operation with no metadata dict.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            A dict containing name-value pairs to associate with the directory</span>
<span class="sd">            as metadata. Example: {&#39;category&#39;:&#39;test&#39;}</span>
<span class="sd">        :type metadata: A dict mapping str to str.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;directory_name&#39;</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;directory&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.list_directories_and_files"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.list_directories_and_files">[docs]</a>    <span class="k">def</span> <span class="nf">list_directories_and_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">num_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a generator to list the directories and files under the specified share.</span>
<span class="sd">        The generator will lazily follow the continuation tokens returned by</span>
<span class="sd">        the service and stop when all directories and files have been returned or</span>
<span class="sd">        num_results is reached.</span>

<span class="sd">        If num_results is specified and the share has more than that number of </span>
<span class="sd">        files and directories, the generator will have a populated next_marker </span>
<span class="sd">        field once it finishes. This marker can be used to create a new generator </span>
<span class="sd">        if more results are desired.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param int num_results:</span>
<span class="sd">            Specifies the maximum number of files to return,</span>
<span class="sd">            including all directory elements. If the request does not specify</span>
<span class="sd">            num_results or specifies a value greater than 5,000, the server will</span>
<span class="sd">            return up to 5,000 items. Setting num_results to a value less than</span>
<span class="sd">            or equal to zero results in error response code 400 (Bad Request).</span>
<span class="sd">        :param str marker:</span>
<span class="sd">            An opaque continuation token. This value can be retrieved from the </span>
<span class="sd">            next_marker field of a previous generator object if num_results was </span>
<span class="sd">            specified and that generator has finished enumerating results. If </span>
<span class="sd">            specified, this generator will begin returning results from the point </span>
<span class="sd">            where the previous generator stopped.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :param str prefix:</span>
<span class="sd">            List only the files and/or directories with the given prefix.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">operation_context</span> <span class="o">=</span> <span class="n">_OperationContext</span><span class="p">(</span><span class="n">location_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">marker</span><span class="p">,</span> <span class="s1">&#39;max_results&#39;</span><span class="p">:</span> <span class="n">num_results</span><span class="p">,</span> <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">timeout</span><span class="p">,</span>
                  <span class="s1">&#39;_context&#39;</span><span class="p">:</span> <span class="n">operation_context</span><span class="p">,</span> <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="n">prefix</span><span class="p">}</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_directories_and_files</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ListGenerator</span><span class="p">(</span><span class="n">resp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_directories_and_files</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_list_directories_and_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                    <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of the directories and files under the specified share.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str marker:</span>
<span class="sd">            A string value that identifies the portion of the list</span>
<span class="sd">            to be returned with the next list operation. The operation returns</span>
<span class="sd">            a next_marker value within the response body if the list returned was</span>
<span class="sd">            not complete. The marker value may then be used in a subsequent</span>
<span class="sd">            call to request the next set of list items. The marker value is</span>
<span class="sd">            opaque to the client.</span>
<span class="sd">        :param int max_results:</span>
<span class="sd">            Specifies the maximum number of files to return,</span>
<span class="sd">            including all directory elements. If the request does not specify</span>
<span class="sd">            max_results or specifies a value greater than 5,000, the server will</span>
<span class="sd">            return up to 5,000 items. Setting max_results to a value less than</span>
<span class="sd">            or equal to zero results in error response code 400 (Bad Request).</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :param str prefix:</span>
<span class="sd">            List only the files and/or directories with the given prefix.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;restype&#39;</span><span class="p">:</span> <span class="s1">&#39;directory&#39;</span><span class="p">,</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span>
             <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">prefix</span><span class="p">),</span>
             <span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">marker</span><span class="p">),</span>
             <span class="s1">&#39;maxresults&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">max_results</span><span class="p">),</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_directories_and_files</span><span class="p">,</span> 
                                     <span class="n">operation_context</span><span class="o">=</span><span class="n">_context</span><span class="p">)</span>

<div class="viewcode-block" id="FileService.get_file_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_file_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata, standard HTTP properties, and</span>
<span class="sd">        system properties for the file. Returns an instance of :class:`.File` with</span>
<span class="sd">        :class:`.FileProperties` and a metadata dict.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: a file object including properties and metadata.</span>
<span class="sd">        :rtype: :class:`~azure.storage.file.models.File`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;HEAD&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">)}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_file</span><span class="p">,</span> <span class="p">[</span><span class="n">file_name</span><span class="p">])</span></div>

<div class="viewcode-block" id="FileService.exists"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.exists">[docs]</a>    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a boolean indicating whether the share exists if only share name is</span>
<span class="sd">        given. If directory_name is specificed a boolean will be returned indicating</span>
<span class="sd">        if the directory exists. If file_name is specified as well, a boolean will be</span>
<span class="sd">        returned indicating if the file exists.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of a share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to a directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of a file.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: A boolean indicating whether the resource exists.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">file_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_file_properties</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">directory_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_directory_properties</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_share_properties</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">_dont_fail_not_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="FileService.resize_file"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.resize_file">[docs]</a>    <span class="k">def</span> <span class="nf">resize_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> 
                    <span class="n">file_name</span><span class="p">,</span> <span class="n">content_length</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Resizes a file to the specified size. If the specified byte</span>
<span class="sd">        value is less than the current size of the file, then all</span>
<span class="sd">        ranges above the specified byte value are cleared.</span>
<span class="sd">        </span>
<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param int content_length:</span>
<span class="sd">            The length to resize the file to.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;content_length&#39;</span><span class="p">,</span> <span class="n">content_length</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;properties&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;x-ms-content-length&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">content_length</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.set_file_properties"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.set_file_properties">[docs]</a>    <span class="k">def</span> <span class="nf">set_file_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> 
                            <span class="n">content_settings</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets system properties on the file. If one property is set for the</span>
<span class="sd">        content_settings, all properties will be overriden.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param ~azure.storage.file.models.ContentSettings content_settings:</span>
<span class="sd">            ContentSettings object used to set the file properties.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;content_settings&#39;</span><span class="p">,</span> <span class="n">content_settings</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;properties&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">content_settings</span><span class="o">.</span><span class="n">_to_headers</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.get_file_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_file_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata for the specified file.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return:</span>
<span class="sd">            A dictionary representing the file metadata name, value pairs.</span>
<span class="sd">        :rtype: dict mapping str to str.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.set_file_metadata"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.set_file_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">set_file_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> 
                          <span class="n">file_name</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets user-defined metadata for the specified file as one or more</span>
<span class="sd">        name-value pairs.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Dict containing name and value pairs. Each call to this operation</span>
<span class="sd">            replaces all existing metadata attached to the file. To remove all</span>
<span class="sd">            metadata from the file, call this operation with no metadata headers.</span>
<span class="sd">        :type metadata: dict mapping str to str</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.copy_file"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.copy_file">[docs]</a>    <span class="k">def</span> <span class="nf">copy_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">copy_source</span><span class="p">,</span>
                  <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Copies a file asynchronously. This operation returns a copy operation </span>
<span class="sd">        properties object, including a copy ID you can use to check or abort the </span>
<span class="sd">        copy operation. The File service copies files on a best-effort basis.</span>

<span class="sd">        If the destination file exists, it will be overwritten. The destination </span>
<span class="sd">        file cannot be modified while the copy operation is in progress.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of the destination share. The share must exist.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            Name of the destination directory. The directory must exist.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of the destination file. If the destination file exists, it will </span>
<span class="sd">            be overwritten. Otherwise, it will be created.</span>
<span class="sd">        :param str copy_source:</span>
<span class="sd">            A URL of up to 2 KB in length that specifies an Azure file or blob. </span>
<span class="sd">            The value should be URL-encoded as it would appear in a request URI. </span>
<span class="sd">            If the source is in another account, the source must either be public </span>
<span class="sd">            or must be authenticated via a shared access signature. If the source </span>
<span class="sd">            is public, no authentication is required.</span>
<span class="sd">            Examples:</span>
<span class="sd">            https://myaccount.file.core.windows.net/myshare/mydir/myfile</span>
<span class="sd">            https://otheraccount.file.core.windows.net/myshare/mydir/myfile?sastoken</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Name-value pairs associated with the file as metadata. If no name-value </span>
<span class="sd">            pairs are specified, the operation will copy the metadata from the </span>
<span class="sd">            source blob or file to the destination file. If one or more name-value </span>
<span class="sd">            pairs are specified, the destination file is created with the specified </span>
<span class="sd">            metadata, and the metadata is not copied from the source blob or file. </span>
<span class="sd">        :type metadata: A dict mapping str to str.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: Copy operation properties such as status, source, and ID.</span>
<span class="sd">        :rtype: :class:`~azure.storage.file.models.CopyProperties`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;copy_source&#39;</span><span class="p">,</span> <span class="n">copy_source</span><span class="p">)</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">)}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;x-ms-copy-source&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">copy_source</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_properties</span><span class="p">,</span> <span class="p">[</span><span class="n">FileProperties</span><span class="p">])</span><span class="o">.</span><span class="n">copy</span></div>

<div class="viewcode-block" id="FileService.abort_copy_file"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.abort_copy_file">[docs]</a>    <span class="k">def</span> <span class="nf">abort_copy_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">copy_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">         Aborts a pending copy_file operation, and leaves a destination file</span>
<span class="sd">         with zero length and full metadata.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">             Name of destination share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">             Name of destination file.</span>
<span class="sd">        :param str copy_id:</span>
<span class="sd">            Copy identifier provided in the copy.id of the original</span>
<span class="sd">            copy_file operation.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;copy_id&#39;</span><span class="p">,</span> <span class="n">copy_id</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;copy&#39;</span><span class="p">,</span>
             <span class="s1">&#39;copyid&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">copy_id</span><span class="p">),</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;x-ms-copy-action&#39;</span><span class="p">:</span> <span class="s1">&#39;abort&#39;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.delete_file"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.delete_file">[docs]</a>    <span class="k">def</span> <span class="nf">delete_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Marks the specified file for deletion. The file is later</span>
<span class="sd">        deleted during garbage collection.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;DELETE&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">)}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.create_file"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.create_file">[docs]</a>    <span class="k">def</span> <span class="nf">create_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span>
                    <span class="n">content_length</span><span class="p">,</span> <span class="n">content_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                    <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new file.</span>

<span class="sd">        See create_file_from_* for high level functions that handle the</span>
<span class="sd">        creation and upload of large files with automatic chunking and</span>
<span class="sd">        progress notifications.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of file to create or update.</span>
<span class="sd">        :param int content_length:</span>
<span class="sd">            Length of the file in bytes.</span>
<span class="sd">        :param ~azure.storage.file.models.ContentSettings content_settings:</span>
<span class="sd">            ContentSettings object used to set file properties.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Name-value pairs associated with the file as metadata.</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;content_length&#39;</span><span class="p">,</span> <span class="n">content_length</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">)}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;x-ms-content-length&#39;</span><span class="p">:</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">content_length</span><span class="p">),</span>
             <span class="s1">&#39;x-ms-type&#39;</span><span class="p">:</span> <span class="s1">&#39;file&#39;</span>
        <span class="p">}</span>
        <span class="n">_add_metadata_headers</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">content_settings</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">content_settings</span><span class="o">.</span><span class="n">_to_headers</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.create_file_from_path"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.create_file_from_path">[docs]</a>    <span class="k">def</span> <span class="nf">create_file_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> 
                           <span class="n">local_file_path</span><span class="p">,</span> <span class="n">content_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new azure file from a local file path, or updates the content of an</span>
<span class="sd">        existing file, with automatic chunking and progress notifications.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of file to create or update.</span>
<span class="sd">        :param str local_file_path:</span>
<span class="sd">            Path of the local file to upload as the file content.</span>
<span class="sd">        :param ~azure.storage.file.models.ContentSettings content_settings:</span>
<span class="sd">            ContentSettings object used for setting file properties.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Name-value pairs associated with the file as metadata.</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If true, calculates an MD5 hash for each range of the file. The storage </span>
<span class="sd">            service checks the hash of the content that has arrived with the hash </span>
<span class="sd">            that was sent. This is primarily valuable for detecting bitflips on </span>
<span class="sd">            the wire if using http instead of https as https (the default) will </span>
<span class="sd">            already validate. Note that this MD5 hash is not stored with the </span>
<span class="sd">            file.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far and total is the</span>
<span class="sd">            size of the file, or None if the total size is unknown.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            Maximum number of parallel connections to use.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;local_file_path&#39;</span><span class="p">,</span> <span class="n">local_file_path</span><span class="p">)</span>

        <span class="n">count</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">local_file_path</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">local_file_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_file_from_stream</span><span class="p">(</span>
                <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span>
                <span class="n">count</span><span class="p">,</span> <span class="n">content_settings</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">validate_content</span><span class="p">,</span> <span class="n">progress_callback</span><span class="p">,</span>
                <span class="n">max_connections</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.create_file_from_text"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.create_file_from_text">[docs]</a>    <span class="k">def</span> <span class="nf">create_file_from_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> 
                           <span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">content_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new file from str/unicode, or updates the content of an</span>
<span class="sd">        existing file, with automatic chunking and progress notifications.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of file to create or update.</span>
<span class="sd">        :param str text:</span>
<span class="sd">            Text to upload to the file.</span>
<span class="sd">        :param str encoding:</span>
<span class="sd">            Python encoding to use to convert the text to bytes.</span>
<span class="sd">        :param ~azure.storage.file.models.ContentSettings content_settings:</span>
<span class="sd">            ContentSettings object used to set file properties.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Name-value pairs associated with the file as metadata.</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If true, calculates an MD5 hash for each range of the file. The storage </span>
<span class="sd">            service checks the hash of the content that has arrived with the hash </span>
<span class="sd">            that was sent. This is primarily valuable for detecting bitflips on </span>
<span class="sd">            the wire if using http instead of https as https (the default) will </span>
<span class="sd">            already validate. Note that this MD5 hash is not stored with the </span>
<span class="sd">            file.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;encoding&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_file_from_bytes</span><span class="p">(</span>
            <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> 
            <span class="n">content_settings</span><span class="o">=</span><span class="n">content_settings</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> 
            <span class="n">validate_content</span><span class="o">=</span><span class="n">validate_content</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.create_file_from_bytes"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.create_file_from_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">create_file_from_bytes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">content_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
        <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> 
        <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new file from an array of bytes, or updates the content</span>
<span class="sd">        of an existing file, with automatic chunking and progress</span>
<span class="sd">        notifications.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of file to create or update.</span>
<span class="sd">        :param str file:</span>
<span class="sd">            Content of file as an array of bytes.</span>
<span class="sd">        :param int index:</span>
<span class="sd">            Start index in the array of bytes.</span>
<span class="sd">        :param int count:</span>
<span class="sd">            Number of bytes to upload. Set to None or negative value to upload</span>
<span class="sd">            all bytes starting from index.</span>
<span class="sd">        :param ~azure.storage.file.models.ContentSettings content_settings:</span>
<span class="sd">            ContentSettings object used to set file properties.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Name-value pairs associated with the file as metadata.</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If true, calculates an MD5 hash for each range of the file. The storage </span>
<span class="sd">            service checks the hash of the content that has arrived with the hash </span>
<span class="sd">            that was sent. This is primarily valuable for detecting bitflips on </span>
<span class="sd">            the wire if using http instead of https as https (the default) will </span>
<span class="sd">            already validate. Note that this MD5 hash is not stored with the </span>
<span class="sd">            file.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far and total is the</span>
<span class="sd">            size of the file, or None if the total size is unknown.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            Maximum number of parallel connections to use.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
        <span class="n">_validate_type_bytes</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">_ERROR_VALUE_NEGATIVE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">count</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="o">-</span> <span class="n">index</span>

        <span class="n">stream</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_file_from_stream</span><span class="p">(</span>
            <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span>
            <span class="n">content_settings</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">validate_content</span><span class="p">,</span> <span class="n">progress_callback</span><span class="p">,</span>
            <span class="n">max_connections</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.create_file_from_stream"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.create_file_from_stream">[docs]</a>    <span class="k">def</span> <span class="nf">create_file_from_stream</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span>
        <span class="n">content_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
        <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new file from a file/stream, or updates the content of an</span>
<span class="sd">        existing file, with automatic chunking and progress notifications.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of file to create or update.</span>
<span class="sd">        :param io.IOBase stream:</span>
<span class="sd">            Opened file/stream to upload as the file content.</span>
<span class="sd">        :param int count:</span>
<span class="sd">            Number of bytes to read from the stream. This is required, a</span>
<span class="sd">            file cannot be created if the count is unknown.</span>
<span class="sd">        :param ~azure.storage.file.models.ContentSettings content_settings:</span>
<span class="sd">            ContentSettings object used to set file properties.</span>
<span class="sd">        :param metadata:</span>
<span class="sd">            Name-value pairs associated with the file as metadata.</span>
<span class="sd">        :type metadata: a dict mapping str to str</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If true, calculates an MD5 hash for each range of the file. The storage </span>
<span class="sd">            service checks the hash of the content that has arrived with the hash </span>
<span class="sd">            that was sent. This is primarily valuable for detecting bitflips on </span>
<span class="sd">            the wire if using http instead of https as https (the default) will </span>
<span class="sd">            already validate. Note that this MD5 hash is not stored with the </span>
<span class="sd">            file.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far and total is the</span>
<span class="sd">            size of the file, or None if the total size is unknown.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            Maximum number of parallel connections to use. Note that parallel upload </span>
<span class="sd">            requires the stream to be seekable.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;stream&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">_ERROR_VALUE_NEGATIVE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span>
            <span class="n">share_name</span><span class="p">,</span>
            <span class="n">directory_name</span><span class="p">,</span>
            <span class="n">file_name</span><span class="p">,</span>
            <span class="n">count</span><span class="p">,</span>
            <span class="n">content_settings</span><span class="p">,</span>
            <span class="n">metadata</span><span class="p">,</span>
            <span class="n">timeout</span>
        <span class="p">)</span>

        <span class="n">_upload_file_chunks</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">share_name</span><span class="p">,</span>
            <span class="n">directory_name</span><span class="p">,</span>
            <span class="n">file_name</span><span class="p">,</span>
            <span class="n">count</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MAX_RANGE_SIZE</span><span class="p">,</span>
            <span class="n">stream</span><span class="p">,</span>
            <span class="n">max_connections</span><span class="p">,</span>
            <span class="n">progress_callback</span><span class="p">,</span>
            <span class="n">validate_content</span><span class="p">,</span>
            <span class="n">timeout</span>
        <span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span>
                 <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
                 <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a file&#39;s content, metadata, and properties. You can specify a</span>
<span class="sd">        range if you don&#39;t need to download the file in its entirety. If no range</span>
<span class="sd">        is specified, the full file will be downloaded.</span>

<span class="sd">        See get_file_to_* for high level functions that handle the download</span>
<span class="sd">        of large files with automatic chunking and progress notifications.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the file.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the file.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            When this is set to True and specified together with the Range header, </span>
<span class="sd">            the service returns the MD5 hash for the range, as long as the range </span>
<span class="sd">            is less than or equal to 4 MB in size.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :return: A File with content, properties, and metadata.</span>
<span class="sd">        :rtype: :class:`~azure.storage.file.models.File`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">)}</span>
        <span class="n">_validate_and_format_range_headers</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span>
            <span class="n">start_range</span><span class="p">,</span>
            <span class="n">end_range</span><span class="p">,</span>
            <span class="n">start_range_required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">end_range_required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">check_content_md5</span><span class="o">=</span><span class="n">validate_content</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_parse_file</span><span class="p">,</span> 
                                     <span class="p">[</span><span class="n">file_name</span><span class="p">,</span> <span class="n">validate_content</span><span class="p">],</span>
                                     <span class="n">operation_context</span><span class="o">=</span><span class="n">_context</span><span class="p">)</span>

<div class="viewcode-block" id="FileService.get_file_to_path"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_file_to_path">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_to_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span>
                         <span class="n">open_mode</span><span class="o">=</span><span class="s1">&#39;wb&#39;</span><span class="p">,</span> <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a file to a file path, with automatic chunking and progress</span>
<span class="sd">        notifications. Returns an instance of File with properties and metadata.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param str file_path:</span>
<span class="sd">            Path of file to write to.</span>
<span class="sd">        :param str open_mode:</span>
<span class="sd">            Mode to use when opening the file. Note that specifying append only </span>
<span class="sd">            open_mode prevents parallel download. So, max_connections must be set </span>
<span class="sd">            to 1 if this open_mode is used.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the file.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the file.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If set to true, validates an MD5 hash for each retrieved portion of </span>
<span class="sd">            the file. This is primarily valuable for detecting bitflips on the wire </span>
<span class="sd">            if using http instead of https as https (the default) will already </span>
<span class="sd">            validate. Note that the service will only return transactional MD5s </span>
<span class="sd">            for chunks 4MB or less so the first get request will be of size </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE instead of self.MAX_SINGLE_GET_SIZE. If </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE was set to greater than 4MB an error will be </span>
<span class="sd">            thrown. As computing the MD5 takes processing time and more requests </span>
<span class="sd">            will need to be done due to the reduced chunk size there may be some </span>
<span class="sd">            increase in latency.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) </span>
<span class="sd">            where current is the number of bytes transfered so far, and total is </span>
<span class="sd">            the size of the file if known.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            If set to 2 or greater, an initial get will be done for the first </span>
<span class="sd">            self.MAX_SINGLE_GET_SIZE bytes of the file. If this is the entire file, </span>
<span class="sd">            the method returns at this point. If it is not, it will download the </span>
<span class="sd">            remaining data parallel using the number of threads equal to </span>
<span class="sd">            max_connections. Each chunk will be of size self.MAX_CHUNK_GET_SIZE.</span>
<span class="sd">            If set to 1, a single large get request will be done. This is not </span>
<span class="sd">            generally recommended but available if very few threads should be </span>
<span class="sd">            used, network requests are very expensive, or a non-seekable stream </span>
<span class="sd">            prevents parallel download. This may also be valuable if the file is </span>
<span class="sd">            being concurrently modified to enforce atomicity or if many files are </span>
<span class="sd">            expected to be empty as an extra request is required for empty files </span>
<span class="sd">            if max_connections is greater than 1.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        :return: A File with properties and metadata.</span>
<span class="sd">        :rtype: :class:`~azure.storage.file.models.File`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_path&#39;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;open_mode&#39;</span><span class="p">,</span> <span class="n">open_mode</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">max_connections</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">open_mode</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_PARALLEL_NOT_SEEKABLE</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">open_mode</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_file_to_stream</span><span class="p">(</span>
                <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span>
                <span class="n">start_range</span><span class="p">,</span> <span class="n">end_range</span><span class="p">,</span> <span class="n">validate_content</span><span class="p">,</span>
                <span class="n">progress_callback</span><span class="p">,</span> <span class="n">max_connections</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">file</span></div>

<div class="viewcode-block" id="FileService.get_file_to_stream"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_file_to_stream">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_to_stream</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span>
        <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a file to a stream, with automatic chunking and progress</span>
<span class="sd">        notifications. Returns an instance of :class:`File` with properties</span>
<span class="sd">        and metadata.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param io.IOBase stream:</span>
<span class="sd">            Opened file/stream to write to.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the file.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the file.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If set to true, validates an MD5 hash for each retrieved portion of </span>
<span class="sd">            the file. This is primarily valuable for detecting bitflips on the wire </span>
<span class="sd">            if using http instead of https as https (the default) will already </span>
<span class="sd">            validate. Note that the service will only return transactional MD5s </span>
<span class="sd">            for chunks 4MB or less so the first get request will be of size </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE instead of self.MAX_SINGLE_GET_SIZE. If </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE was set to greater than 4MB an error will be </span>
<span class="sd">            thrown. As computing the MD5 takes processing time and more requests </span>
<span class="sd">            will need to be done due to the reduced chunk size there may be some </span>
<span class="sd">            increase in latency.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) </span>
<span class="sd">            where current is the number of bytes transfered so far, and total is </span>
<span class="sd">            the size of the file if known.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            If set to 2 or greater, an initial get will be done for the first </span>
<span class="sd">            self.MAX_SINGLE_GET_SIZE bytes of the file. If this is the entire file, </span>
<span class="sd">            the method returns at this point. If it is not, it will download the </span>
<span class="sd">            remaining data parallel using the number of threads equal to </span>
<span class="sd">            max_connections. Each chunk will be of size self.MAX_CHUNK_GET_SIZE.</span>
<span class="sd">            If set to 1, a single large get request will be done. This is not </span>
<span class="sd">            generally recommended but available if very few threads should be </span>
<span class="sd">            used, network requests are very expensive, or a non-seekable stream </span>
<span class="sd">            prevents parallel download. This may also be valuable if the file is </span>
<span class="sd">            being concurrently modified to enforce atomicity or if many files are </span>
<span class="sd">            expected to be empty as an extra request is required for empty files </span>
<span class="sd">            if max_connections is greater than 1.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        :return: A File with properties and metadata.</span>
<span class="sd">        :rtype: :class:`~azure.storage.file.models.File`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;stream&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>

        <span class="c1"># If the user explicitly sets max_connections to 1, do a single shot download</span>
        <span class="k">if</span> <span class="n">max_connections</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_file</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span>
                                  <span class="n">directory_name</span><span class="p">,</span>
                                  <span class="n">file_name</span><span class="p">,</span>
                                  <span class="n">start_range</span><span class="o">=</span><span class="n">start_range</span><span class="p">,</span>
                                  <span class="n">end_range</span><span class="o">=</span><span class="n">end_range</span><span class="p">,</span>
                                  <span class="n">validate_content</span><span class="o">=</span><span class="n">validate_content</span><span class="p">,</span>
                                  <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

            <span class="c1"># Set the download size</span>
            <span class="n">download_size</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_length</span>

        <span class="c1"># If max_connections is greater than 1, do the first get to establish the </span>
        <span class="c1"># size of the file and get the first segment of data</span>
        <span class="k">else</span><span class="p">:</span>       
            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stream</span><span class="o">.</span><span class="n">seekable</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_ERROR_PARALLEL_NOT_SEEKABLE</span><span class="p">)</span>
                
            <span class="c1"># The service only provides transactional MD5s for chunks under 4MB.           </span>
            <span class="c1"># If validate_content is on, get only self.MAX_CHUNK_GET_SIZE for the first </span>
            <span class="c1"># chunk so a transactional MD5 can be retrieved.</span>
            <span class="n">first_get_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_SINGLE_GET_SIZE</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_content</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_CHUNK_GET_SIZE</span>

            <span class="n">initial_request_start</span> <span class="o">=</span> <span class="n">start_range</span> <span class="k">if</span> <span class="n">start_range</span> <span class="k">else</span> <span class="mi">0</span>

            <span class="k">if</span> <span class="n">end_range</span> <span class="ow">and</span> <span class="n">end_range</span> <span class="o">-</span> <span class="n">start_range</span> <span class="o">&lt;</span> <span class="n">first_get_size</span><span class="p">:</span>
                <span class="n">initial_request_end</span> <span class="o">=</span> <span class="n">end_range</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">initial_request_end</span> <span class="o">=</span> <span class="n">initial_request_start</span> <span class="o">+</span> <span class="n">first_get_size</span> <span class="o">-</span> <span class="mi">1</span>

            <span class="c1"># Send a context object to make sure we always retry to the initial location</span>
            <span class="n">operation_context</span> <span class="o">=</span> <span class="n">_OperationContext</span><span class="p">(</span><span class="n">location_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_file</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span>
                                      <span class="n">directory_name</span><span class="p">,</span>
                                      <span class="n">file_name</span><span class="p">,</span>
                                      <span class="n">start_range</span><span class="o">=</span><span class="n">initial_request_start</span><span class="p">,</span>
                                      <span class="n">end_range</span><span class="o">=</span><span class="n">initial_request_end</span><span class="p">,</span>
                                      <span class="n">validate_content</span><span class="o">=</span><span class="n">validate_content</span><span class="p">,</span>
                                      <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                      <span class="n">_context</span><span class="o">=</span><span class="n">operation_context</span><span class="p">)</span>

                <span class="c1"># Parse the total file size and adjust the download size if ranges </span>
                <span class="c1"># were specified</span>
                <span class="n">file_size</span> <span class="o">=</span> <span class="n">_parse_length_from_content_range</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_range</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">end_range</span><span class="p">:</span>
                    <span class="c1"># Use the end_range unless it is over the end of the file</span>
                    <span class="n">download_size</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">file_size</span><span class="p">,</span> <span class="n">end_range</span> <span class="o">-</span> <span class="n">start_range</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">start_range</span><span class="p">:</span>
                    <span class="n">download_size</span> <span class="o">=</span> <span class="n">file_size</span> <span class="o">-</span> <span class="n">start_range</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">download_size</span> <span class="o">=</span> <span class="n">file_size</span>
            <span class="k">except</span> <span class="n">AzureHttpError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">start_range</span> <span class="ow">and</span> <span class="n">ex</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">416</span><span class="p">:</span>
                    <span class="c1"># Get range will fail on an empty file. If the user did not </span>
                    <span class="c1"># request a range, do a regular get request in order to get </span>
                    <span class="c1"># any properties.</span>
                    <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_file</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span>
                                          <span class="n">directory_name</span><span class="p">,</span>
                                          <span class="n">file_name</span><span class="p">,</span>
                                          <span class="n">validate_content</span><span class="o">=</span><span class="n">validate_content</span><span class="p">,</span>
                                          <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                          <span class="n">_context</span><span class="o">=</span><span class="n">operation_context</span><span class="p">)</span>

                    <span class="c1"># Set the download size to empty</span>
                    <span class="n">download_size</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ex</span>

        <span class="c1"># Mark the first progress chunk. If the file is small or this is a single </span>
        <span class="c1"># shot download, this is the only call</span>
        <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
            <span class="n">progress_callback</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_length</span><span class="p">,</span> <span class="n">download_size</span><span class="p">)</span>

        <span class="c1"># Write the content to the user stream  </span>
        <span class="c1"># Clear file content since output has been written to user stream   </span>
        <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="n">file</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># If the file is small or single shot download was used, the download is </span>
        <span class="c1"># complete at this point. If file size is large, use parallel download.</span>
        <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_length</span> <span class="o">!=</span> <span class="n">download_size</span><span class="p">:</span>       
            <span class="c1"># At this point would like to lock on something like the etag so that </span>
            <span class="c1"># if the file is modified, we dont get a corrupted download. However, </span>
            <span class="c1"># this feature is not yet available on the file service.</span>
            
            <span class="n">end_file</span> <span class="o">=</span> <span class="n">file_size</span>
            <span class="k">if</span> <span class="n">end_range</span><span class="p">:</span>
                <span class="c1"># Use the end_range unless it is over the end of the file</span>
                <span class="n">end_file</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">file_size</span><span class="p">,</span> <span class="n">end_range</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
               
            <span class="n">_download_file_chunks</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">share_name</span><span class="p">,</span>
                <span class="n">directory_name</span><span class="p">,</span>
                <span class="n">file_name</span><span class="p">,</span>
                <span class="n">download_size</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MAX_CHUNK_GET_SIZE</span><span class="p">,</span>
                <span class="n">first_get_size</span><span class="p">,</span>
                <span class="n">initial_request_end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="c1"># start where the first download ended</span>
                <span class="n">end_file</span><span class="p">,</span>
                <span class="n">stream</span><span class="p">,</span>
                <span class="n">max_connections</span><span class="p">,</span>
                <span class="n">progress_callback</span><span class="p">,</span>
                <span class="n">validate_content</span><span class="p">,</span>
                <span class="n">timeout</span><span class="p">,</span>
                <span class="n">operation_context</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Set the content length to the download size instead of the size of </span>
            <span class="c1"># the last range</span>
            <span class="n">file</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_length</span> <span class="o">=</span> <span class="n">download_size</span>

            <span class="c1"># Overwrite the content range to the user requested range</span>
            <span class="n">file</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_range</span> <span class="o">=</span> <span class="s1">&#39;bytes </span><span class="si">{0}</span><span class="s1">-</span><span class="si">{1}</span><span class="s1">/</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">start_range</span><span class="p">,</span> <span class="n">end_range</span><span class="p">,</span> <span class="n">file_size</span><span class="p">)</span>

            <span class="c1"># Overwrite the content MD5 as it is the MD5 for the last range instead </span>
            <span class="c1"># of the stored MD5</span>
            <span class="c1"># TODO: Set to the stored MD5 when the service returns this</span>
            <span class="n">file</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">content_md5</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">file</span></div>

<div class="viewcode-block" id="FileService.get_file_to_bytes"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_file_to_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_to_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> 
                          <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a file as an array of bytes, with automatic chunking and</span>
<span class="sd">        progress notifications. Returns an instance of :class:`File` with</span>
<span class="sd">        properties, metadata, and content.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the file.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the file.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If set to true, validates an MD5 hash for each retrieved portion of </span>
<span class="sd">            the file. This is primarily valuable for detecting bitflips on the wire </span>
<span class="sd">            if using http instead of https as https (the default) will already </span>
<span class="sd">            validate. Note that the service will only return transactional MD5s </span>
<span class="sd">            for chunks 4MB or less so the first get request will be of size </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE instead of self.MAX_SINGLE_GET_SIZE. If </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE was set to greater than 4MB an error will be </span>
<span class="sd">            thrown. As computing the MD5 takes processing time and more requests </span>
<span class="sd">            will need to be done due to the reduced chunk size there may be some </span>
<span class="sd">            increase in latency.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) </span>
<span class="sd">            where current is the number of bytes transfered so far, and total is </span>
<span class="sd">            the size of the file if known.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            If set to 2 or greater, an initial get will be done for the first </span>
<span class="sd">            self.MAX_SINGLE_GET_SIZE bytes of the file. If this is the entire file, </span>
<span class="sd">            the method returns at this point. If it is not, it will download the </span>
<span class="sd">            remaining data parallel using the number of threads equal to </span>
<span class="sd">            max_connections. Each chunk will be of size self.MAX_CHUNK_GET_SIZE.</span>
<span class="sd">            If set to 1, a single large get request will be done. This is not </span>
<span class="sd">            generally recommended but available if very few threads should be </span>
<span class="sd">            used, network requests are very expensive, or a non-seekable stream </span>
<span class="sd">            prevents parallel download. This may also be valuable if the file is </span>
<span class="sd">            being concurrently modified to enforce atomicity or if many files are </span>
<span class="sd">            expected to be empty as an extra request is required for empty files </span>
<span class="sd">            if max_connections is greater than 1.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        :return: A File with properties, content, and metadata.</span>
<span class="sd">        :rtype: :class:`~azure.storage.file.models.File`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>

        <span class="n">stream</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
        <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_file_to_stream</span><span class="p">(</span>
            <span class="n">share_name</span><span class="p">,</span>
            <span class="n">directory_name</span><span class="p">,</span>
            <span class="n">file_name</span><span class="p">,</span>
            <span class="n">stream</span><span class="p">,</span>
            <span class="n">start_range</span><span class="p">,</span>
            <span class="n">end_range</span><span class="p">,</span>
            <span class="n">validate_content</span><span class="p">,</span>
            <span class="n">progress_callback</span><span class="p">,</span>
            <span class="n">max_connections</span><span class="p">,</span>
            <span class="n">timeout</span><span class="p">)</span>

        <span class="n">file</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">file</span></div>

<div class="viewcode-block" id="FileService.get_file_to_text"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.get_file_to_text">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_to_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
        <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_connections</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a file as unicode text, with automatic chunking and progress</span>
<span class="sd">        notifications. Returns an instance of :class:`File` with properties,</span>
<span class="sd">        metadata, and content.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param str encoding:</span>
<span class="sd">            Python encoding to use when decoding the file data.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for downloading a section of the file.</span>
<span class="sd">            If no end_range is given, all bytes after the start_range will be downloaded.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for downloading a section of the file.</span>
<span class="sd">            If end_range is given, start_range must be provided.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If set to true, validates an MD5 hash for each retrieved portion of </span>
<span class="sd">            the file. This is primarily valuable for detecting bitflips on the wire </span>
<span class="sd">            if using http instead of https as https (the default) will already </span>
<span class="sd">            validate. Note that the service will only return transactional MD5s </span>
<span class="sd">            for chunks 4MB or less so the first get request will be of size </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE instead of self.MAX_SINGLE_GET_SIZE. If </span>
<span class="sd">            self.MAX_CHUNK_GET_SIZE was set to greater than 4MB an error will be </span>
<span class="sd">            thrown. As computing the MD5 takes processing time and more requests </span>
<span class="sd">            will need to be done due to the reduced chunk size there may be some </span>
<span class="sd">            increase in latency.</span>
<span class="sd">        :param progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) </span>
<span class="sd">            where current is the number of bytes transfered so far, and total is </span>
<span class="sd">            the size of the file if known.</span>
<span class="sd">        :type progress_callback: callback function in format of func(current, total)</span>
<span class="sd">        :param int max_connections:</span>
<span class="sd">            If set to 2 or greater, an initial get will be done for the first </span>
<span class="sd">            self.MAX_SINGLE_GET_SIZE bytes of the file. If this is the entire file, </span>
<span class="sd">            the method returns at this point. If it is not, it will download the </span>
<span class="sd">            remaining data parallel using the number of threads equal to </span>
<span class="sd">            max_connections. Each chunk will be of size self.MAX_CHUNK_GET_SIZE.</span>
<span class="sd">            If set to 1, a single large get request will be done. This is not </span>
<span class="sd">            generally recommended but available if very few threads should be </span>
<span class="sd">            used, network requests are very expensive, or a non-seekable stream </span>
<span class="sd">            prevents parallel download. This may also be valuable if the file is </span>
<span class="sd">            being concurrently modified to enforce atomicity or if many files are </span>
<span class="sd">            expected to be empty as an extra request is required for empty files </span>
<span class="sd">            if max_connections is greater than 1.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds. This method may make </span>
<span class="sd">            multiple calls to the Azure service and the timeout will apply to </span>
<span class="sd">            each call individually.</span>
<span class="sd">        :return: A File with properties, content, and metadata.</span>
<span class="sd">        :rtype: :class:`~azure.storage.file.models.File`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;encoding&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>

        <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_file_to_bytes</span><span class="p">(</span>
            <span class="n">share_name</span><span class="p">,</span>
            <span class="n">directory_name</span><span class="p">,</span>
            <span class="n">file_name</span><span class="p">,</span>
            <span class="n">start_range</span><span class="p">,</span>
            <span class="n">end_range</span><span class="p">,</span>
            <span class="n">validate_content</span><span class="p">,</span>
            <span class="n">progress_callback</span><span class="p">,</span>
            <span class="n">max_connections</span><span class="p">,</span>
            <span class="n">timeout</span><span class="p">)</span>

        <span class="n">file</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">file</span></div>

<div class="viewcode-block" id="FileService.update_range"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.update_range">[docs]</a>    <span class="k">def</span> <span class="nf">update_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> 
                     <span class="n">start_range</span><span class="p">,</span> <span class="n">end_range</span><span class="p">,</span> <span class="n">validate_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Writes the bytes specified by the request body into the specified range.</span>
<span class="sd">         </span>
<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param bytes data:</span>
<span class="sd">            Content of the range.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for updating a section of the file.</span>
<span class="sd">            The range can be up to 4 MB in size.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for updating a section of the file.</span>
<span class="sd">            The range can be up to 4 MB in size.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param bool validate_content:</span>
<span class="sd">            If true, calculates an MD5 hash of the page content. The storage </span>
<span class="sd">            service checks the hash of the content that has arrived</span>
<span class="sd">            with the hash that was sent. This is primarily valuable for detecting </span>
<span class="sd">            bitflips on the wire if using http instead of https as https (the default) </span>
<span class="sd">            will already validate. Note that this MD5 hash is not stored with the </span>
<span class="sd">            file.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;range&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;x-ms-write&#39;</span><span class="p">:</span> <span class="s1">&#39;update&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">_validate_and_format_range_headers</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="n">start_range</span><span class="p">,</span> <span class="n">end_range</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_data_bytes_only</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">validate_content</span><span class="p">:</span>
            <span class="n">computed_md5</span> <span class="o">=</span> <span class="n">_get_content_md5</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-MD5&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_to_str</span><span class="p">(</span><span class="n">computed_md5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.clear_range"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.clear_range">[docs]</a>    <span class="k">def</span> <span class="nf">clear_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">start_range</span><span class="p">,</span>
                    <span class="n">end_range</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Clears the specified range and releases the space used in storage for </span>
<span class="sd">        that range.</span>
<span class="sd">         </span>
<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Start of byte range to use for clearing a section of the file.</span>
<span class="sd">            The range can be up to 4 MB in size.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            End of byte range to use for clearing a section of the file.</span>
<span class="sd">            The range can be up to 4 MB in size.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;range&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;Content-Length&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
             <span class="s1">&#39;x-ms-write&#39;</span><span class="p">:</span> <span class="s1">&#39;clear&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">_validate_and_format_range_headers</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="n">start_range</span><span class="p">,</span> <span class="n">end_range</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></div>

<div class="viewcode-block" id="FileService.list_ranges"><a class="viewcode-back" href="../../../../ref/azure.storage.file.fileservice.html#azure.storage.file.fileservice.FileService.list_ranges">[docs]</a>    <span class="k">def</span> <span class="nf">list_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span>
                    <span class="n">start_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieves the valid ranges for a file.</span>

<span class="sd">        :param str share_name:</span>
<span class="sd">            Name of existing share.</span>
<span class="sd">        :param str directory_name:</span>
<span class="sd">            The path to the directory.</span>
<span class="sd">        :param str file_name:</span>
<span class="sd">            Name of existing file.</span>
<span class="sd">        :param int start_range:</span>
<span class="sd">            Specifies the start offset of bytes over which to list ranges.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int end_range:</span>
<span class="sd">            Specifies the end offset of bytes over which to list ranges.</span>
<span class="sd">            The start_range and end_range params are inclusive.</span>
<span class="sd">            Ex: start_range=0, end_range=511 will download first 512 bytes of file.</span>
<span class="sd">        :param int timeout:</span>
<span class="sd">            The timeout parameter is expressed in seconds.</span>
<span class="sd">        :returns: a list of valid ranges</span>
<span class="sd">        :rtype: a list of :class:`.FileRange`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;share_name&#39;</span><span class="p">,</span> <span class="n">share_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s1">&#39;file_name&#39;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host_locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_locations</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_get_path</span><span class="p">(</span><span class="n">share_name</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;comp&#39;</span><span class="p">:</span> <span class="s1">&#39;rangelist&#39;</span><span class="p">,</span>
             <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">_int_to_str</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">start_range</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_validate_and_format_range_headers</span><span class="p">(</span>
                <span class="n">request</span><span class="p">,</span>
                <span class="n">start_range</span><span class="p">,</span>
                <span class="n">end_range</span><span class="p">,</span>
                <span class="n">start_range_required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">end_range_required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_convert_xml_to_ranges</span><span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Microsoft.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>